(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c598102"],{"194a":function(e,t,s){},3652:function(e,t,s){"use strict";s("194a")},4305:function(e,t,s){"use strict";s("8532")},"567a":function(e,t,s){},"7ac8":function(e,t,s){"use strict";s("567a")},8310:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",{attrs:{height:"30"}},[s("app-header")],1),s("el-container",[s("el-aside",{staticClass:"left-panel",attrs:{width:"230px"}},[s("app-side-panel"),s("div",[e._l(e.messages,(function(t,a){return s("div",{key:a},[e._v(" "+e._s(t)+" ")])})),s("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),s("el-button",{on:{click:e.sendMessage}},[e._v("发送")])],2)],1),s("el-main",[s("app-stage")],1)],1)],1)},i=[],n=s("5530"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-header"},[e.connected?s("el-tag",{attrs:{type:"success"}},[e._v("服务已连接")]):s("el-tag",{attrs:{type:"danger"}},[e._v("服务未连接")]),e.isGameStarted?s("el-tag",{attrs:{type:"success"}},[e._v("上课中")]):s("el-tag",{attrs:{type:"info"}},[e._v("还未上课")])],1)},r=[],c=s("2f62"),l={computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])(["connected"])),Object(c["b"])(["isGameStarted"]))},d=l,h=(s("4305"),s("2877")),u=Object(h["a"])(d,o,r,!1,null,"41c78bb7",null),p=u.exports,m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{display:"flex"}},[s("el-card",{ref:"wrapper",attrs:{"body-style":{padding:0},id:"card1"}},[s("v-stage",{attrs:{id:"stage",config:e.stageConfig},on:{mousedown:e.mousedownHandler,mouseup:e.mouseupHandler,mousemove:e.mousemoveHandler,touchstart:e.touchstartHandler,touchmove:e.touchmoveHandler,touchend:e.touchendHandler}},[s("v-layer",e._l(e.lines1,(function(e,t){return s("v-line",{key:t,attrs:{config:e}})})),1)],1)],1),s("el-card",{ref:"wrapper",attrs:{"body-style":{padding:0},id:"card2"}},[s("v-stage",{attrs:{id:"stage2",config:e.stageConfig},on:{mousedown:e.mousedownHandler,mouseup:e.mouseupHandler,mousemove:e.mousemoveHandler,touchstart:e.touchstartHandler,touchmove:e.touchmoveHandler,touchend:e.touchendHandler}},[s("v-layer",e._l(e.lines2,(function(e,t){return s("v-line",{key:t,attrs:{config:e}})})),1)],1)],1)],1)},g=[],f=s("ef8c"),v=f["a"],b=(s("7ac8"),Object(h["a"])(v,m,g,!1,null,"c34745a6",null)),w=b.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",[s("div",{staticClass:"panel-area"},[s("ul",{staticClass:"participants"},e._l(e.teacherphones,(function(t){return s("li",{key:t},[s("span",[e._v(e._s(t)+" "+e._s(t===e.teacherphone?"（我）":""))]),t===e.holder?s("el-tag",{attrs:{size:"mini"}},[e._v("老师")]):e._e()],1)})),0)]),s("div",{staticClass:"panel-area button-area"},[e.isGameStarted?e._e():s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:e.startGameHandler}},[e._v("开始上课")]),e.isGameStarted&&e.teacherphone===e.holder?s("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-delete"},on:{click:e.stopGameHandler}},[e._v("结束上课")]):e._e(),e.isGameStarted&&e.teacherphone!==e.holder?s("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"success",size:"small",icon:"el-icon-magic-stick"},on:{click:e.answerGameHandler}},[e._v("回答问题")]):e._e(),s("el-button",{staticStyle:{"margin-top":"5px","margin-left":"0"},attrs:{type:"danger",size:"small",icon:"el-icon-switch-button"},on:{click:e.exitHandler}},[e._v("退出课堂")])],1),s("el-dialog",{attrs:{title:"请设置答案",visible:e.resultDialogVisible,width:"30%"},on:{"update:visible":function(t){e.resultDialogVisible=t}}},[s("el-input",{attrs:{placeholder:"请输入您的答案"},model:{value:e.expectImageName,callback:function(t){e.expectImageName=t},expression:"expectImageName"}}),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.resultDialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.saveDialogHandler}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"请填写答案",visible:e.answerDialogVisible,width:"30%"},on:{"update:visible":function(t){e.answerDialogVisible=t}}},[s("el-input",{attrs:{placeholder:"请输入您的答案"},model:{value:e.inputImageName,callback:function(t){e.inputImageName=t},expression:"inputImageName"}}),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.answerDialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.saveAnswerDialogHandler}},[e._v("确 定")])],1)],1)],1)},k=[],_=(s("ac1f"),s("5319"),{data:function(){return{resultDialogVisible:!1,expectImageName:"",answerDialogVisible:!1,inputImageName:""}},computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])(["teacherphone","teacherphones","holder"])),Object(c["b"])(["isGameStarted"])),methods:{startGameHandler:function(){this.resultDialogVisible=!0,this.expectImageName=""},stopGameHandler:function(){var e=this;this.$confirm("确定要终止游戏吗?","温馨提示").then((function(){e.$store.dispatch("sendStopGame")}))["catch"]((function(e){console.log(e)}))},answerGameHandler:function(){this.answerDialogVisible=!0,this.inputImageName=""},saveDialogHandler:function(){this.expectImageName?(this.$store.dispatch("sendStartGame",this.expectImageName),this.resultDialogVisible=!1):this.$message.error("答案不能为空哦!")},saveAnswerDialogHandler:function(){this.inputImageName?(this.$store.dispatch("sendAnswerGame",this.inputImageName),this.answerDialogVisible=!1):this.$message.error("答案不能为空")},exitHandler:function(){var e=this;this.$confirm("是否退出游戏","温馨提示").then((function(){e.$store.dispatch("sendUserLeave"),e.$router.replace("/login")}))["catch"]((function(e){console.log(e)}))}}}),H=_,$=(s("3652"),Object(h["a"])(H,y,k,!1,null,"8057afee",null)),N=$.exports,x={components:{AppHeader:p,AppStage:w,AppSidePanel:N},created:function(){this.$store.dispatch("sendUserEnter")},computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])(["teacherphone","messages","holder"])),Object(c["b"])(["isGameStarted"])),data:function(){return{message:""}},methods:{sendMessage:function(){var e=this;if(""!==this.message&&0!=this.message.length){var t={teacherphone:localStorage.getItem("teacherphone"),msg:this.message};this.$store.dispatch("sendMessage",t).then((function(t){console.log(t),e.message=""}))["catch"]((function(e){}))}}}},O=x,j=(s("ee31"),Object(h["a"])(O,a,i,!1,null,"1ffc7e51",null));t["default"]=j.exports},8532:function(e,t,s){},ee31:function(e,t,s){"use strict";s("fc19")},ef8c:function(e,t,s){"use strict";(function(e){var a=s("5530"),i=(s("99af"),s("2f62"));t["a"]={created:function(){},mounted:function(){this.getXb=document.getElementById("card1").clientWidth,this.stageConfig.width=this.$refs.wrapper.$el.offsetWidth,this.$store.commit("initXb",this.getXb);window.addEventListener("touchmove",(function(){}),{passive:!1})},data:function(){return{linesIndex:0,lineIndex:0,stageConfig:{width:1300,height:450},painting:!1,stroke:"#d42d1f",strokeWidth:2.1,getXb:1}},computed:Object(a["a"])(Object(a["a"])({},Object(i["c"])(["lines1","lines2"])),Object(i["b"])(["isGameStarted","isGameHolder"])),methods:{mousedownHandler:function(e){if(this.painting=!0,"stage"===e.currentTarget.attrs.id){var t={stroke:this.stroke,strokeWidth:this.strokeWidth,points:[e.evt.layerX/this.getXb,e.evt.layerY]};this.$store.dispatch("teachersendDrawNewLine",t),this.$store.commit("teacherdrawNewLine",t)}else{var s={stroke:this.stroke,strokeWidth:this.strokeWidth,points:[e.evt.layerX/this.getXb,e.evt.layerY]};this.$store.dispatch("teachersendDrawNewLine2",s),this.$store.commit("teacherdrawNewLine2",s)}},mousemoveHandler:function(e){if(this.painting)if("stage"===e.currentTarget.attrs.id){var t=this.lines1[this.lines1.length-1];t.points=t.points.concat([e.evt.layerX/this.getXb,e.evt.layerY]),this.$store.dispatch("teachersendUpdateNewLine",t),this.$store.commit("teacherupdateNewLine1",t)}else{var s=this.lines2[this.lines2.length-1];s.points=s.points.concat([e.evt.layerX/this.getXb,e.evt.layerY]),this.$store.dispatch("teachersendUpdateNewLine2",s),this.$store.commit("teacherupdateNewLine2",s)}},mouseupHandler:function(){this.painting=!1},touchstartHandler:function(t){this.painting=!0;var s=t.evt.changedTouches[0].clientX-e("#card1").offset().left,a=t.evt.changedTouches[0].clientY-e("#card1").offset().top+e(document).scrollTop(),i={stroke:this.stroke,strokeWidth:this.strokeWidth,points:[s/this.getXb,a]};this.$store.dispatch("sendDrawNewLine",i),this.$store.commit("drawNewLine",i)},touchmoveHandler:function(t){if(this.painting){this.nowX=document.getElementById("card1").clientWidth;var s=this.lines[this.lines.length-1],a=t.evt.changedTouches[0].clientX-e("#card1").offset().left,i=t.evt.changedTouches[0].clientY-e("#card1").offset().top+e(document).scrollTop();s.points=s.points.concat([a/this.getXb,i]),this.$store.dispatch("sendUpdateNewLine",s),this.$store.commit("updateNewLine1",s)}},touchendHandler:function(){this.painting=!1}}}}).call(this,s("1157"))},fc19:function(e,t,s){}}]);
//# sourceMappingURL=chunk-4c598102.d1b4e9f1.js.map
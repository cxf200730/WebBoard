(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc8b0676"],{"0d03":function(t,e,n){var i=n("6eeb"),a=Date.prototype,s="Invalid Date",o="toString",c=a[o],r=a.getTime;new Date(NaN)+""!=s&&i(a,o,(function(){var t=r.call(this);return t===t?c.call(this):s}))},"0fe9":function(t,e,n){"use strict";(function(t){var i=n("5530"),a=(n("99af"),n("2f62"));e["a"]={created:function(){var t=this,e=new window.Image;e.src="",e.onload=function(){t.imgConfig.image=e}},mounted:function(){window.addEventListener("touchmove",(function(){}),{passive:!1}),this.getXb=document.getElementById("card").clientWidth,this.getYb=document.getElementById("card").clientHeight,this.stageConfig.width=this.$refs.wrapper.$el.offsetWidth,this.stageConfig.height=this.$refs.wrapper.$el.offsetHeight,this.$store.commit("initXb",this.getXb),this.$store.commit("initYb",this.getYb)},data:function(){return{getXb:1,getYb:1,stageConfig:{width:560,height:450},imgConfig:{image:"",width:560},painting:!1,stroke:"#FFFFFF",strokeWidth:1,pictureIndex:0,imgList:["","http://qxg2acp58.hn-bkt.clouddn.com/makeexam1629100825425.png","http://qxg2acp58.hn-bkt.clouddn.com/makeexam1629100889920.png","http://qxg2acp58.hn-bkt.clouddn.com/makeexam93.png"]}},computed:Object(i["a"])(Object(i["a"])({},Object(a["c"])(["lines","allpicture"])),Object(a["b"])(["isGameStarted","isGameHolder"])),methods:{chooseItem:function(t){this.linesIndex=t-1;var e=this;this.stageConfig.width=this.$refs.wrapper.$el.offsetWidth,this.stageConfig.height=this.$refs.wrapper.$el.offsetHeight;var n=new window.Image;n.src=this.imgList[t-1],n.onload=function(){e.imgConfig.image=n}},remove:function(){localStorage.removeItem("studentcode"),localStorage.removeItem("classcode"),localStorage.removeItem("teacherphone"),this.$router.push("login")},touchstartHandler:function(e){this.painting=!0;var n=e.evt.changedTouches[0].clientX-t("#card").offset().left,i=e.evt.changedTouches[0].clientY-t("#card").offset().top+t(document).scrollTop(),a={points:[n/this.getXb,i/this.getYb,(n+.5)/this.getXb,(i+.5)/this.getYb],stroke:this.stroke,strokeWidth:this.strokeWidth,lineCap:"round",lineJoin:"round",preventDefault:!1,rotation:.1};this.$store.commit("drawNewLine",a)},touchmoveHandler:function(e){if(this.painting){this.nowX=document.getElementById("card").clientWidth;var n=this.lines[this.lines.length-1],i=e.evt.changedTouches[0].clientX-t("#card").offset().left,a=e.evt.changedTouches[0].clientY-t("#card").offset().top+t(document).scrollTop();n.points=n.points.concat([i/this.getXb,a/this.getYb]),n.points.length>6&&(n.bezier=!0),this.$store.commit("updateNewLine1",n)}},touchendHandler:function(){this.painting=!1}}}}).call(this,n("1157"))},"12e8":function(t,e,n){},"40a8":function(t,e,n){"use strict";n("ab39")},4795:function(t,e,n){var i=n("23e7"),a=n("da84"),s=n("342f"),o=[].slice,c=/MSIE .\./.test(s),r=function(t){return function(e,n){var i=arguments.length>2,a=i?o.call(arguments,2):void 0;return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,a)}:e,n)}};i({global:!0,bind:!0,forced:c},{setTimeout:r(a.setTimeout),setInterval:r(a.setInterval)})},"6ce8":function(t,e,n){"use strict";n("12e8")},"6eba":function(t,e,n){var i=n("23e7");i({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},"7e4c":function(t,e,n){},ab39:function(t,e,n){},aea4:function(t,e,n){},af28:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",{attrs:{height:"60px"}}),n("el-main",[n("app-stage")],1),n("el-footer",{attrs:{height:"110px"}})],1)},a=[],s=n("5530"),o=(n("6eba"),n("0d03"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-header"},[n("el-tag",[t._v("房间号："+t._s(t.classCode))]),n("el-tag",[t._v("学号"+t._s(t.studentCode))]),n("el-tag",[t._v("开始时间："+t._s(t.nowDate))]),this.minute<=0?n("el-tag",[t._v("开始时长："+t._s(t.startTime)+"秒")]):n("el-tag",[t._v("开始时长："+t._s(t.minute)+"分"+t._s(t.startTime)+"秒")])],1)}),c=[],r=(n("4795"),n("2f62")),h={created:function(){this.classCode=localStorage.getItem("classcode"),this.studentCode=localStorage.getItem("studentcode"),this.nowDate=(new Date).toLocaleString(),this.startTime=0,this.minute=0},mounted:function(){var t=this,e=this;this.nowDate=setInterval((function(){t.nowDate=(new Date).toLocaleString(),t.startTime++,60===t.startTime&&(e.minute++,e.startTime=0)}),1e3)},beforeDestroy:function(){clearInterval(this.nowDate)},computed:Object(s["a"])(Object(s["a"])({},Object(r["c"])(["connected"])),Object(r["b"])(["isGameStarted"])),data:function(){return{classCode:"",studentCode:"",nowDate:"",startTime:"",minute:""}}},l=h,u=(n("de73"),n("2877")),d=Object(u["a"])(l,o,c,!1,null,"33972631",null),f=d.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{ref:"wrapper",attrs:{"body-style":{padding:0},id:"card"}},[n("v-stage",{attrs:{id:"stage",config:t.stageConfig},on:{touchstart:t.touchstartHandler,touchmove:t.touchmoveHandler,touchend:t.touchendHandler}},[n("v-layer",[n("v-image",{attrs:{config:t.imgConfig}}),t._l(t.lines,(function(t,e){return n("v-line",{key:e,attrs:{config:t}})}))],2)],1)],1)},m=[],p=n("0fe9"),v=p["a"],b=(n("40a8"),Object(u["a"])(v,g,m,!1,null,"60828563",null)),w=b.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},I=[],D=(n("ac1f"),n("5319"),{data:function(){return{}},computed:{},methods:{startGameHandler:function(){this.resultDialogVisible=!0,this.expectImageName=""},stopGameHandler:function(){var t=this;this.$confirm("确定要终止游戏吗?","温馨提示").then((function(){t.$store.dispatch("sendStopGame")}))["catch"]((function(t){console.log(t)}))},answerGameHandler:function(){this.answerDialogVisible=!0,this.inputImageName=""},saveDialogHandler:function(){this.expectImageName?(this.$store.dispatch("sendStartGame",this.expectImageName),this.resultDialogVisible=!1):this.$message.error("答案不能为空哦!")},saveAnswerDialogHandler:function(){this.inputImageName?(this.$store.dispatch("sendAnswerGame",this.inputImageName),this.answerDialogVisible=!1):this.$message.error("答案不能为空")},exitHandler:function(){var t=this;this.$confirm("是否退出游戏","温馨提示").then((function(){t.$store.dispatch("sendUserLeave"),t.$router.replace("/login")}))["catch"]((function(t){console.log(t)}))}}}),_=D,x=(n("6ce8"),Object(u["a"])(_,$,I,!1,null,"865fb3c6",null)),C=x.exports,S={components:{AppHeader:f,AppStage:w,AppSidePanel:C},created:function(){this.$store.dispatch("sendUserEnter")},mounted:function(){var t=0;document.documentElement.addEventListener("touchend",(function(e){var n=Date.now();n-t<=300&&e.preventDefault(),t=n}),{passive:!1})},computed:Object(s["a"])(Object(s["a"])({},Object(r["c"])(["teacherphone","messages","holder"])),Object(r["b"])(["isGameStarted"])),data:function(){return{message:"",defferScroll:function(t){t.preventDefault()}}},methods:{sendMessage:function(){if(""!==this.message&&0!=this.message.length){var t={teacherphone:localStorage.getItem("teacherphone"),msg:this.message};this.$store.dispatch("sendMessage",t).then((function(t){console.log(t)}))["catch"]((function(t){}))}}}},H=S,T=(n("fa17"),Object(u["a"])(H,i,a,!1,null,"7e3a3952",null));e["default"]=T.exports},de73:function(t,e,n){"use strict";n("7e4c")},fa17:function(t,e,n){"use strict";n("aea4")}}]);
//# sourceMappingURL=chunk-cc8b0676.5705c3b8.js.map
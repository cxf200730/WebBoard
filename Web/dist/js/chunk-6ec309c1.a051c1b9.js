(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ec309c1"],{"19ce":function(e,t,n){},"3ff0":function(e,t,n){},4489:function(e,t,n){},"49f0":function(e,t,n){"use strict";n("4489")},"4d37":function(e,t,n){"use strict";n("c6b9")},c6b9:function(e,t,n){},cdb1:function(e,t,n){"use strict";(function(e){var s=n("5530"),i=(n("99af"),n("2f62"));t["a"]={created:function(){},mounted:function(){this.getXb=document.getElementById("card").clientWidth,this.stageConfig.width=this.$refs.wrapper.$el.offsetWidth,this.$store.commit("initXb",this.getXb),window.addEventListener("touchmove",(function(){}),{passive:!1})},data:function(){return{linesIndex:0,lineIndex:0,stageConfig:{width:1300,height:450},painting:!1,stroke:"#000000",strokeWidth:1.7,getXb:1}},computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])(["lines"])),Object(i["b"])(["isGameStarted","isGameHolder"])),methods:{mousedownHandler:function(e){this.painting=!0;var t={stroke:this.stroke,strokeWidth:this.strokeWidth,points:[e.evt.layerX/this.getXb,e.evt.layerY]};this.$store.dispatch("sendDrawNewLine",t),this.$store.commit("drawNewLine",t)},mousemoveHandler:function(e){if(this.painting){var t=this.lines[this.lines.length-1];t.points=t.points.concat([e.evt.layerX/this.getXb,e.evt.layerY]),console.log("11"+t.points[t.points.length-2]),this.$store.dispatch("sendUpdateNewLine",t),this.$store.commit("updateNewLine1",t)}},mouseupHandler:function(){this.painting=!1},touchstartHandler:function(t){this.painting=!0;var n=t.evt.changedTouches[0].clientX-e("#card").offset().left,s=t.evt.changedTouches[0].clientY-e("#card").offset().top+e(document).scrollTop(),i={stroke:this.stroke,strokeWidth:this.strokeWidth,points:[n/this.getXb,s]};this.$store.dispatch("sendDrawNewLine",i),this.$store.commit("drawNewLine",i)},touchmoveHandler:function(t){if(this.painting){this.nowX=document.getElementById("card").clientWidth;var n=this.lines[this.lines.length-1],s=t.evt.changedTouches[0].clientX-e("#card").offset().left,i=t.evt.changedTouches[0].clientY-e("#card").offset().top+e(document).scrollTop();n.points=n.points.concat([s/this.getXb,i]),this.$store.dispatch("sendUpdateNewLine",n),this.$store.commit("updateNewLine1",n)}},touchendHandler:function(){this.painting=!1}}}}).call(this,n("1157"))},d420:function(e,t,n){"use strict";n("19ce")},f898:function(e,t,n){"use strict";n("3ff0")},fd3e:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{attrs:{height:"30"}},[n("app-header")],1),n("el-container",[n("el-aside",{staticClass:"left-panel",attrs:{width:"230px"}},[n("app-side-panel"),n("div",[e._l(e.messages,(function(t,s){return n("div",{key:s},[e._v(" "+e._s(t)+" ")])})),n("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),n("el-button",{on:{click:e.sendMessage}},[e._v("发送")])],2)],1),n("el-main",[n("app-stage")],1)],1)],1)},i=[],a=n("5530"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-header"},[e.connected?n("el-tag",{attrs:{type:"success"}},[e._v("服务已连接")]):n("el-tag",{attrs:{type:"danger"}},[e._v("服务未连接")]),e.isGameStarted?n("el-tag",{attrs:{type:"success"}},[e._v("上课中")]):n("el-tag",{attrs:{type:"info"}},[e._v("还未上课")])],1)},c=[],r=n("2f62"),l={computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["connected"])),Object(r["b"])(["isGameStarted"]))},d=l,u=(n("f898"),n("2877")),h=Object(u["a"])(d,o,c,!1,null,"57ccb559",null),p=h.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{ref:"wrapper",attrs:{"body-style":{padding:0},id:"card"}},[n("v-stage",{attrs:{id:"stage",config:e.stageConfig},on:{mousedown:e.mousedownHandler,mouseup:e.mouseupHandler,mousemove:e.mousemoveHandler,touchstart:e.touchstartHandler,touchmove:e.touchmoveHandler,touchend:e.touchendHandler}},[n("v-layer",e._l(e.lines,(function(e,t){return n("v-line",{key:t,attrs:{config:e}})})),1)],1)],1)],1)},g=[],f=n("cdb1"),b=f["a"],v=(n("49f0"),Object(u["a"])(b,m,g,!1,null,"1b3e1c90",null)),w=v.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",[n("div",{staticClass:"panel-area"},[n("ul",{staticClass:"participants"},e._l(e.teacherphones,(function(t){return n("li",{key:t},[n("span",[e._v(e._s(t)+" "+e._s(t===e.teacherphone?"（我）":""))])])})),0)]),n("div",{staticClass:"panel-area button-area"},[e.isGameStarted?e._e():n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:e.startGameHandler}},[e._v("开始上课")]),e.isGameStarted&&e.teacherphone===e.holder?n("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-delete"},on:{click:e.stopGameHandler}},[e._v("结束上课")]):e._e(),e.isGameStarted&&e.teacherphone!==e.holder?n("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"success",size:"small",icon:"el-icon-magic-stick"},on:{click:e.answerGameHandler}},[e._v("回答问题")]):e._e(),n("el-button",{staticStyle:{"margin-top":"5px","margin-left":"0"},attrs:{type:"danger",size:"small",icon:"el-icon-switch-button"},on:{click:e.exitHandler}},[e._v("退出课堂")])],1),n("el-dialog",{attrs:{title:"请设置答案",visible:e.resultDialogVisible,width:"30%"},on:{"update:visible":function(t){e.resultDialogVisible=t}}},[n("el-input",{attrs:{placeholder:"请输入您的答案"},model:{value:e.expectImageName,callback:function(t){e.expectImageName=t},expression:"expectImageName"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.resultDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.saveDialogHandler}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"请填写答案",visible:e.answerDialogVisible,width:"30%"},on:{"update:visible":function(t){e.answerDialogVisible=t}}},[n("el-input",{attrs:{placeholder:"请输入您的答案"},model:{value:e.inputImageName,callback:function(t){e.inputImageName=t},expression:"inputImageName"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.answerDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.saveAnswerDialogHandler}},[e._v("确 定")])],1)],1)],1)},y=[],_=(n("ac1f"),n("5319"),{data:function(){return{resultDialogVisible:!1,expectImageName:"",answerDialogVisible:!1,inputImageName:""}},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["teacherphone","teacherphones","holder"])),Object(r["b"])(["isGameStarted"])),methods:{startGameHandler:function(){this.resultDialogVisible=!0,this.expectImageName=""},stopGameHandler:function(){var e=this;this.$confirm("确定要终止游戏吗?","温馨提示").then((function(){e.$store.dispatch("sendStopGame")}))["catch"]((function(e){console.log(e)}))},answerGameHandler:function(){this.answerDialogVisible=!0,this.inputImageName=""},saveDialogHandler:function(){this.expectImageName?(this.$store.dispatch("sendStartGame",this.expectImageName),this.resultDialogVisible=!1):this.$message.error("答案不能为空哦!")},saveAnswerDialogHandler:function(){this.inputImageName?(this.$store.dispatch("sendAnswerGame",this.inputImageName),this.answerDialogVisible=!1):this.$message.error("答案不能为空")},exitHandler:function(){var e=this;this.$confirm("是否退出游戏","温馨提示").then((function(){e.$store.dispatch("sendUserLeave"),e.$router.replace("/login")}))["catch"]((function(e){console.log(e)}))}}}),H=_,$=(n("4d37"),Object(u["a"])(H,k,y,!1,null,"1e77b40c",null)),x=$.exports,N={components:{AppHeader:p,AppStage:w,AppSidePanel:x},created:function(){this.$store.dispatch("sendUserEnter")},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["teacherphone","messages","holder"])),Object(r["b"])(["isGameStarted"])),data:function(){return{message:""}},methods:{sendMessage:function(){var e=this;if(""!==this.message&&0!=this.message.length){var t={teacherphone:localStorage.getItem("teacherphone"),msg:this.message};this.$store.dispatch("sendMessage",t).then((function(t){console.log(t),e.message=""}))["catch"]((function(e){}))}}}},O=N,j=(n("d420"),Object(u["a"])(O,s,i,!1,null,"40e2bb36",null));t["default"]=j.exports}}]);
//# sourceMappingURL=chunk-6ec309c1.a051c1b9.js.map
### 日志更新

### 2021-08-27(version 2.10.0)
1. 新增范围语音功能
2. 修复已知问题
### 2021-08-12(version 2.9.1)
1. 修复小部分设备切换摄像头或麦克风失败的问题
### 2021-08-09(version 2.9.0)
1. 新增对混流接口中的 inputList[].streamID 参数取值进行校验
2. 支持推流成功前调用 replaceTrack 接口替换媒体流的音视频轨道
3. 推流端关闭视频画面后再开启时，拉流端不再依赖媒体信令来恢复画面
4. 修复了推流后通过 useAudioDevice 或 useVideoDevice 接口切换外接摄像头或麦克风设备，硬件层面断开与外接设备的连接时没有触发 deviceError 回调的问题
5. 修复了通过 createStream 创建第三方流时 custom.source 参数传 MediaStream 后设置开始码率快速上升没有生效的问题
6. 修复了当使用外接麦克风和摄像头进行推流时拔出设备，上报的摄像头状态没有变为关闭状态的问题
### 2021-07-09(version 2.8.1)
1. 修复已知问题

### 2021-07-09(version 2.8.0)
1. 新增静音麦克风接口和获取麦克风静音状态接口
2. 关闭正在推流画面时可选择保留预览画面
3. 低延迟模式拉流当 App 不支持时报错误码提示
4. 修复断网时使用 web 端流会报错，没有正常返回断网推流失败错误信息
5. 修复推流时码率快速上升策略只对 H264 编码生效而用 VP8 推流不生效的问题
6. 修复其它已知问题
### 2021-06-10(version 2.7.1)
1. 新增获取本地音浪回调接口 capturedSoundLevelUpdate
2. 创建流时通过参数 startBitrate 来设置推流的开始码率（仅chrome有效）
3. 优化推流过程中切换摄像头设备逻辑
4. 优化混流服务接口 startMixingTask 的错误信息提示
5. 新增错误码 1003025 标识推流被禁止
6. 优化拉流端丢包时会出现花屏的情况 
7. 修复切换音频设备后音浪回调返回的一直是 0 而不是新设备音浪。
8. 修复推流端关闭麦克风时拉流质量报文中的 audioMuteState 没有变化
### 2021-04-29(version 2.6.0)
1. 优化了推拉流协商模式，减少推拉流首帧耗时，推拉流首帧耗时能在原有基础上缩短 150 ms 以上。
2. 优化了推拉流网络质量算法：进一步优化了推拉流网络质量的算法，提高推拉流质量回调中对 [videoQuality] 与 [audioQuality] 监听的准确性。
3. 增加节点质量探测：若检测到当前网络质量差则触发节点探测，SDK 会寻找质量更佳的推拉流节点进行切换，进一步提高抗弱网能力。

### 2021-04-15(version 2.5.0)
1. 修复了切换摄像头，原来的摄像头未被释放问题
2. 修复其它已知问题
### 2021-04-01(version 2.4.0)
1. 优化视频码率设置策略，解决视频码率开始较低问题
2. 日志地址优先级用户配置会高于后台下发
3. 检测接口重新设计优化，提高视频编码检测准确率，并支持单项检测
4. 解决ios safari 使用部分蓝牙耳机播放音效时音质怪异问题
5. 修复其它已知问题
### 2021-03-18(version 2.3.0)
1. 优化了推拉流网络质量评级逻辑，提高评估准确率
2. 混音接口现支持对纯视频流混音
3. 修复调用拉流接口后马上调用停止拉流接口，出现报错问题
4. 修复了chrome浏览器关闭摄像头后推流卡顿问题
5. 修复弹幕消息第一次发送耗时过长问题

### 2021-03-04(version 2.2.0)
1. 新增采集音量修改功能
2. 被踢出增加详细被踢出原因
3. 修复重复登录流更新后流更新未触发问题
4. 修复safari 11推流失败问题

### 2021-01-28(version 2.1.0)
1. 修复windows设备chrome浏览器开启硬件加速下视频码率无法达到预期值的问题
2. 修复pc微信内置浏览器拉流一段时间报错问题
### 2021-01-14(version 2.0.0)
1. 代码重构，减少不同模块之间耦合性
2. 日志系统重构，优化了日志结构，提高问题定位效率
3. 重试逻辑重构，进一步提高SDK抗弱网能力

### 2020-12-31(version 1.19.0)
1. 新增动态设置是否拉取远端音频流和视频流的功能
2. 修复了第三方流的音视频文件播放完成后，销毁流失败的问题
### 2020-12-17(version 1.18.0)
1. 流更新回调新增扩展信息参数，例如：当流被删除时能够抛出相关原因信息
2. 新增调节混音音量功能
3. 优化了 SDK 流媒体 websocket 连接等待时间
4. 修复了推流为纯音频的场景下，Safari 浏览器选择自动拉取模式时拉到的音频没有声音的问题
### 2020-12-03(version 1.17.1)
 1. 修复了静音后混音时，再次打开麦克风不能恢复麦克风声音的问题
 2. 修复了推流重试过程中调用停止推流接口时，对端未能及时收到流删除通知的问题
 3. 修复了退出房间后快速重登房间时，对端可能收不到房间用户进出回调的问题
### 2020-11-26(version 1.16.5)
 1. 修复了某些网络异常情况下推流重试可能失败的问题
 2. 修复了拉流端短时间内连续收到摄像头状态变更时可能状态不同步的问题
### 2020-11-23(version 1.16.1)
 1. 修复弱网场景下同时推拉多路流调度可能失败问题
### 2020-11-19(version 1.16.0)
 1. 第三方流支持设置推流的音频声道数和码率
 2. 新增支持动态修改推流音频参数
 3. 新增设备插拔回调
 4. 优化弱网情况下停止推流后，拉流端收不到流删除回调的问题
 5. 优化推流端关闭摄像头后重新打开时，拉流端可能拉不到视频画面的问题
 6. 修复了在火狐浏览器上推流成功后刷新页面，再次输入相同房间号推流时拉不到流的问题

### 2020-11-14(version 1.15.1)
 1. 修复 roomExtraInfoUpdate 回调 typescript 声明类型错误问题
### 2020-11-05(version 1.15.0)
 1. 优化 safari 浏览器使用混音功能时，麦克风采集声音质量差的问题
 2. 优化日志连接断开时报错信息
 3. 优化 SDK 上报设备状态的日志，增加相应流 ID
 4. 修复 sendCustomCommand 回调结果，删除了返回值中的 messageID
 5. 修复同一用户在其他平台登录导致从 web 平台下线时不触发 roomStateUpdate 的问题
 6. 修复相同用户 ID 登录房间时，房间内其他用户收到 roomUserUpdate 回调的问题

### 2020-10-15(version 1.14.0)
 1. 推拉流质量回调中增加音频帧率（audioFPS），用于展示当前音频流畅度
 2. 增加屏幕分享流的推流分辨率设置，创建屏幕共享流时若传入的 videoQuality 参数取值为 4，则开发者需要将帧率、码率和分辨率传给 SDK
 3. 优化及重构了音视频通话过程中出现异常时的重试逻辑，提高 SDK 抗弱网能力，减少业务侧重试
 4. 优化增加转推 CDN 和删除转推 CDN 接口，去除鉴权，提高易用性
 5. 修复部分错误码信息重复问题

### 2020-09-24(version 1.13.0)
 1. 增加接口数值参数的类型判断，数值类型要求是整数
 2. 增加替换音视频轨道
 3. 检查设备可用性时，增加返回具体错误详情
 4. 统一推流状态回调 publisherStateUpdate 在请求超时的错误码
 5. 修复登录后更改日志配置导致日志事件上报缺失roomid

### 2020-09-10(version 1.12.0)
 1. 新增房间附加消息功能setRoomExtraInfo
 2. 退出房间的参数优化，roomID 改为可选参数
 3. 预览时支持切换摄像头、麦克风设备
 4. 创建流时设置的分辨率、码率、帧率等参数的类型判断，只允许正整数
 5. 捕获回调事件中出现业务逻辑的错误，避免影响 SDK 内部逻辑的运行
 6. 修复混流停止回调里调用logoutRoom可能报错的问题
 7. logoutRoom 接口 roomID 改为可选参数，日志事件加上 roomID
 8. log 事件日志添加字段区分正式环境、测试环境
 9. 推拉流相关日志增加服务连接节点，便于查询日志定位问题
 10. 修复其它已知问题

### 2020-08-27(version 1.11.0)
 1. 增加 roomOnlineUserCountUpdate 回调房间当前在线人数
 2. 统一通过 streamExtraInfoUpdate 得到流附加信息
 3. 混流若只混纯音频, 内部处理相关参数
 4. 修复其它已知问题

### 2020-08-13(version 1.10.0)
 1. startPublishingStream 接口参数publishOption 的属性增加类型判断，加强接口使用规范
 2. 推拉流状态回调流id统一不带测试环境前缀，输出统一
 3. 新增支持双声道
 4. 优化媒体服务心跳，根据返回值发送心跳，提升连接稳定性
 5. 修复重复收到重试错误后推拉流状态可能不回调问题
 6. 推拉流相关日志增加流id, 便于查询日志定位问题
 7. 推拉流质量回调增加对标签属性相关参数的监听，提高对推拉流无声问题的定位效率
 8. 推拉流上报可用带宽等信息，方便定位分辨率下降问题
 9. 推流质量回调中增加丢包信息，便于定位网络问题
 10. 修复其它已知问题

### 2020-07-30(version 1.9.0)
 1. 创建屏幕共享流时优先使用插件进行屏幕共享，插件形式的屏幕共享兼容性更佳
 2. 优化停止推拉流接口的调用，推拉流后的任何时间都可以成功调用对应的停止接口
 3. 推拉流调度逻辑优化，减少不必要的代码执行
 4. 优化切换摄像头麦克风设备接口错误信息处理逻辑，相应的错误信息都会通过reject抛出
 5. 若调用停止推流前使用了混音功能，则调用停止推流接口时 SDK 内部将对应流的混音一并停止
 6. 优化 SDK 针对浏览器异常关闭的处理逻辑，兼容对浏览器beforeunload事件的监听
 7. 修复订阅拉流更新回调信息中 CDN 地址为空的问题
 8. 修复其它已知问题

### 2020-07-20(version 1.8.1)
 1. startMixerTask 参数检查修正

### 2020-07-15(version 1.8.0)
 1. server 支持备用域名，提升在网络环境不好时的连通率
 2. 统一对外错误码，对齐native 端
 3. 修复推拉流首次质量上报为空的问题，优化上报数据信息
 4. 开始、停止推拉流增加状态回调
 5. 修复切换设备内部部分错误没回调的问题
 6. 优化内部心跳发送逻辑
 7. 修复外接摄像头松动，web端拉流无法拉继续拉音频流问题
 8. 修复推流过程关闭摄像头，safari 拉音频流失败问题
 9. 修复其它已知问题

### 2020-06-30(version 1.7.0)
 1. 增加startMixingAudio 开始混音接口，并追加支持多路混音
 2. 增加stopMixingAudio 停止混音接口
 3. 新增音浪回调设置接口 setSoundLevelDelegate 用户可根据需要设置音浪回调频率，通过 soundLevelUpdate 回调
 4. 拉流是否拉音视频若有设置以用户设置的为准
 5. 屏幕共享接口现支持多次调用
 6. 优化音频处理逻辑，避免性能浪费
 7. 推拉流视频编解码参数兼容大小写，提高容错率
 8. 修复推流前调用接口关闭摄像头麦克风，再进行推流，此时拉流端收到摄像头或麦克风状态不符合预期问题
 9. 修复在使用插件进行屏幕共享点击取消后多次弹窗问题，优化错误信息
 10. 修复其它已知问题

### 2020-06-15(version 1.6.0)
 1. 创建流createStream接口码率参数新增范围约束，解决自定义参数容易越界,导致推流失败问题
 2. 质量上报优化，解决部分浏览器存在质量上报缺失部分参数的问题
 3. 检测接口优化，模拟真实使用硬件设备，提高检测准确性
 4. publisherState及playerState状态回调优化，去除streamID测试环境前缀, 新增尝试推流中状态回调
 5. 流更新接口优化，当服务端返回房间流列表为空时,不再触发回调
 6. 修复其它已知问题

### 2020-06-08(version 1.5.2)
 1. startMixerTask 参数修正
 2. 修复日志信息过长上传报错

### 2020-06-02(version 1.5.1)
 1. mutePublishStreamAudio 参数修正

### 2020-05-15(version 1.5.0)
 1. useVideoDevice useAudioDevice 切换设备接口改为Promise，加强可维护性
 2. 优化部分错误码信息
 3. 拉流设备状态逻辑优化
 4. 增加部分关键日志，部分日志优化
 5. 修复已知问题

### 2020-04-30(version 1.4.0)
 1. 增加混音本地播放功能
 2. 增加获取音量接口 getSoundLevel
 3. 增加停止获取音量接口 stopSoundLevel
 4. 优化房间用户列表拉取策略
 5. 修复已知问题

### 2020-04-15(version 1.3.0)

 1. 客户端控制房间最大人数
 2. webrtc增加对https的检测
 3. 优化节点重试逻辑
 4. 修复已知问题

### 2020-03-31(version 1.2.1)

1. 新增remoteCameraStatusUpdate remoteMicStatusUpdate 监听回调推流端摄像头及麦克风设备状态
2. 新增节点重试逻辑 提高连接稳定性及成功率
3. 检测接口新增对屏幕共享功能检测，优化检测逻辑
4. 新增推流设备状态信息上报，优化日志信息
5. 增加房间弹幕消息功能
6. 上麦下麦通知优化
7. 媒体新增推流拉流成功信令，提高上报推拉流时机的准确性
8. 在媒体signal 断开或心跳超时增加重连下个节点逻辑

### 2019-11-28(version 1.1.0)

1. 增加混流功能
2. 增加房间 IM 功能
3. 对齐各端接口，接口命名、参数命名、取值等统一

### 2019-10-31(version 1.0.0)

Zego Webrtc Express SDK 初版发布

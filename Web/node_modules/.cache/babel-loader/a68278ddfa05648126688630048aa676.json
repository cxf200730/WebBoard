{"remainingRequest":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/babel-loader/lib/index.js!/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/socket/index.js","dependencies":[{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/socket/index.js","mtime":1629629577518},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IGlvIGZyb20gJ3NvY2tldC5pby1jbGllbnQnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IE1lc3NhZ2VCb3gsIE5vdGlmaWNhdGlvbiB9IGZyb20gJ2VsZW1lbnQtdWknOwp2YXIgc29ja2V0ID0gaW8oKTsKc29ja2V0Lm9uKCdjb25uZWN0JywgZnVuY3Rpb24gKCkgewogIGNvbnNvbGUubG9nKCc+Pj4+Pj4+IOWSjOacjeWKoeWZqOW3suW7uueri+i/nuaOpScpOwp9KTsgLy8g6Ieq5bex6L+b5YWl5oi/6Ze0LCDnm5HlkKxyb29tX2luZm/kuovku7YsIOiOt+WPluaIv+mXtOS/oeaBrwoKc29ja2V0Lm9uKCdyb29tX2luZm8nLCBmdW5jdGlvbiAoX3JlZikgewogIHZhciB0ZWFjaGVycGhvbmVzID0gX3JlZi50ZWFjaGVycGhvbmVzLAogICAgICBob2xkZXIgPSBfcmVmLmhvbGRlciwKICAgICAgbGluZXMgPSBfcmVmLmxpbmVzOwogIHN0b3JlLmNvbW1pdCgndXBkYXRldGVhY2hlcnBob25lcycsIHRlYWNoZXJwaG9uZXMpOwogIHN0b3JlLmNvbW1pdCgndXBkYXRlSG9sZGVyJywgaG9sZGVyKTsgLy8gc3RvcmUuY29tbWl0KCd1cGRhdGVMaW5lcycsIGxpbmVzKQoKICBzdG9yZS5jb21taXQoJ3VwZGF0ZUxpbmVzJywgW10pOwp9KTsgLy8g5Yir5Lq66L+b5YWl5oi/6Ze0LCDnm5HlkKx1c2VyX2VudGVy5LqL5Lu2LCDojrflj5bov5vlhaXmiL/pl7TnmoTnlKjmiLfkv6Hmga8KCnNvY2tldC5vbigndXNlcl9lbnRlcicsIGZ1bmN0aW9uICh0ZWFjaGVycGhvbmUpIHsKICBzdG9yZS5jb21taXQoJ2FkZFRvdGVhY2hlcnBob25lcycsIHRlYWNoZXJwaG9uZSk7Cn0pOwpzb2NrZXQub24oJ3VzZXJfc2VuZCcsIGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgc3RvcmUuY29tbWl0KCdhZGRUb21lc3NhZ2VzJywgbWVzc2FnZSk7Cn0pOyAvLyDlpITnkIbmnI3liqHov57mjqUKCnNvY2tldC5vbignY29ubmVjdCcsIGZ1bmN0aW9uICgpIHsKICBzdG9yZS5jb21taXQoJ3VwZGF0ZUNvbm5lY3RlZCcsIHRydWUpOwp9KTsgLy8g5aSE55CG5pyN5Yqh5aSx5Y676L+e5o6lCgpzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbiAoKSB7CiAgc3RvcmUuY29tbWl0KCd1cGRhdGVDb25uZWN0ZWQnLCBmYWxzZSk7Cn0pOyAvLyDlpITnkIbmuLjmiI/lvIDlp4sKCnNvY2tldC5vbignZ2FtZV9zdGFydGVkJywgZnVuY3Rpb24gKGhvbGRlcikgewogIHN0b3JlLmNvbW1pdCgndXBkYXRlSG9sZGVyJywgaG9sZGVyKTsKICBOb3RpZmljYXRpb24uc3VjY2VzcygiIi5jb25jYXQoaG9sZGVyLCAiIFx1ODAwMVx1NUUwOFx1NUYwMFx1NTlDQlx1NEU4Nlx1OEJGRVx1NTgwMlx1RkYwQ1x1NTkyN1x1NUJCNlx1NTNFRlx1NEVFNVx1NUYwMFx1NTlDQlx1OEUwQVx1OERDM1x1NTZERVx1N0I1NFx1OTVFRVx1OTg5OFx1NTU2Nlx1RkYwMSIpKTsKfSk7IC8vIOWkhOeQhua4uOaIj+W3sue7j+W8gOWniywg5LiN6IO96YeN5aSN5byA5aeLCgpzb2NrZXQub24oJ2FscmVhZHlfc3RhcnRlZCcsIGZ1bmN0aW9uIChob2xkZXIpIHsKICBzdG9yZS5jb21taXQoJ3VwZGF0ZUhvbGRlcicsIGhvbGRlcik7CiAgTWVzc2FnZUJveC5hbGVydCgn5b2T5YmN5bey5pyJ6K++5aCC5Zyo6L+b6KGM5Lit77yM6ICB5biI5piv77yaJyArIGhvbGRlcik7Cn0pOyAvLyDlpITnkIbnu4jmraLmuLjmiI8KCnNvY2tldC5vbignZ2FtZV9zdG9wZWQnLCBmdW5jdGlvbiAoKSB7CiAgLy8gMS4g5riF55CG55u45YWz5pWw5o2uCiAgc3RvcmUuY29tbWl0KCd1cGRhdGVIb2xkZXInLCAnJyk7CiAgc3RvcmUuY29tbWl0KCd1cGRhdGVMaW5lcycsIFtdKTsgLy8gMi4g5by55Ye65o+Q56S65raI5oGvCgogIE5vdGlmaWNhdGlvbi53YXJuaW5nKCfogIHluIjkuIvor77kuoYnKTsKfSk7IC8vIOebkeWQrOaWsOe6v+eahOe7mOWItgoKc29ja2V0Lm9uKCdzdGFydGluZ19saW5lJywgZnVuY3Rpb24gKG5ld0xpbmUpIHsKICBzdG9yZS5jb21taXQoJ3N0dWRlbnRkcmF3TmV3TGluZScsIG5ld0xpbmUpOwp9KTsgLy8g55uR5ZCs57q/55qE5pu05pawCgpzb2NrZXQub24oJ3VwZGF0aW5nX2xpbmUnLCBmdW5jdGlvbiAobGFzdExpbmUpIHsKICBzdG9yZS5jb21taXQoJ3N0dWRlbnR1cGRhdGVOZXdMaW5lJywgbGFzdExpbmUpOwp9KTsKc29ja2V0Lm9uKCdnYW1lX2Fuc3dlcmVkJywgZnVuY3Rpb24gKF9yZWYyKSB7CiAgdmFyIGFscmVhZHlEb25lID0gX3JlZjIuYWxyZWFkeURvbmUsCiAgICAgIHN1Y2Nlc3MgPSBfcmVmMi5zdWNjZXNzLAogICAgICB0ZWFjaGVycGhvbmUgPSBfcmVmMi50ZWFjaGVycGhvbmUsCiAgICAgIGFuc3dlciA9IF9yZWYyLmFuc3dlcjsKCiAgaWYgKGFscmVhZHlEb25lKSB7CiAgICBNZXNzYWdlQm94LmFsZXJ0KCflvZPliY3pl67popjlt7Lnu4/ooqvlm57nrZTvvIzmgqjkuI3og73nu6fnu63lm57nrZTkuobvvIEnKTsKICAgIHJldHVybjsKICB9CgogIGlmICghc3VjY2VzcykgewogICAgTm90aWZpY2F0aW9uLmVycm9yKCJcdTczQTlcdTVCQjYgIi5jb25jYXQodGVhY2hlcnBob25lLCAiIFx1NTZERVx1N0I1NFx1NzY4NFx1NzY4NFx1N0I1NFx1Njg0OFx1NEUwRFx1NUJGOVx1RkYxQSIpLmNvbmNhdChhbnN3ZXIpKTsKICAgIHJldHVybjsKICB9CgogIE1lc3NhZ2VCb3guYWxlcnQoIlx1NzNBOVx1NUJCNiAiLmNvbmNhdCh0ZWFjaGVycGhvbmUsICIgXHU1NkRFXHU3QjU0XHU0RTg2XHU2QjYzXHU3ODZFXHU3Njg0XHU3QjU0XHU2ODQ4XHVGRjFBIikuY29uY2F0KGFuc3dlciksIHsKICAgIHRpdGxlOiAn5oGt5ZacJywKICAgIHR5cGU6ICdzdWNjZXNzJwogIH0pOwp9KTsKc29ja2V0Lm9uKCd1c2VyX2xlYXZlJywgZnVuY3Rpb24gKHRlYWNoZXJwaG9uZSkgewogIHN0b3JlLmNvbW1pdCgnZGVsRnJvbXRlYWNoZXJwaG9uZXMnLCB0ZWFjaGVycGhvbmUpOwoKICBpZiAodGVhY2hlcnBob25lID09PSBzdG9yZS5zdGF0ZS5ob2xkZXIpIHsKICAgIHN0b3JlLmNvbW1pdCgndXBkYXRlSG9sZGVyJywgJycpOwogICAgc3RvcmUuY29tbWl0KCd1cGRhdGVMaW5lcycsIFtdKTsKICAgIE5vdGlmaWNhdGlvbi5lcnJvcign6ICB5biI56a75byA5LqG5pWZ5a6kIScpOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHNvY2tldDs="},{"version":3,"sources":["/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/socket/index.js"],"names":["io","store","MessageBox","Notification","socket","on","console","log","teacherphones","holder","lines","commit","teacherphone","message","success","alert","warning","newLine","lastLine","alreadyDone","answer","error","title","type","state"],"mappings":"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","sourcesContent":["import io from 'socket.io-client'\nimport store from '@/store'\nimport { MessageBox, Notification } from 'element-ui'\n\nconst socket = io()\n\nsocket.on('connect', () => {\n  console.log('>>>>>>> 和服务器已建立连接')\n})\n\n// 自己进入房间, 监听room_info事件, 获取房间信息\nsocket.on('room_info', ({ teacherphones, holder, lines }) => {\n  store.commit('updateteacherphones', teacherphones)\n  store.commit('updateHolder', holder)\n  // store.commit('updateLines', lines)\n  store.commit('updateLines', [])\n})\n   \n// 别人进入房间, 监听user_enter事件, 获取进入房间的用户信息\nsocket.on('user_enter', teacherphone => {\n  store.commit('addToteacherphones', teacherphone)\n})\nsocket.on('user_send', message => {\n  store.commit('addTomessages', message)\n})\n// 处理服务连接\nsocket.on('connect', () => {\n  store.commit('updateConnected', true)\n})\n\n// 处理服务失去连接\nsocket.on('disconnect', () => {\n  store.commit('updateConnected', false)\n})\n\n// 处理游戏开始\nsocket.on('game_started', holder => {\n  store.commit('updateHolder', holder)\n  Notification.success(`${holder} 老师开始了课堂，大家可以开始踊跃回答问题啦！`)\n})\n\n// 处理游戏已经开始, 不能重复开始\nsocket.on('already_started', holder => {\n  store.commit('updateHolder', holder)\n  MessageBox.alert('当前已有课堂在进行中，老师是：' + holder)\n})\n\n// 处理终止游戏\nsocket.on('game_stoped', () => {\n  // 1. 清理相关数据\n  store.commit('updateHolder', '')\n  store.commit('updateLines', [])\n\n  // 2. 弹出提示消息\n  Notification.warning('老师下课了')\n})\n\n// 监听新线的绘制\nsocket.on('starting_line', newLine => {\n  store.commit('studentdrawNewLine', newLine)\n})\n\n// 监听线的更新\nsocket.on('updating_line', lastLine => {\n  store.commit('studentupdateNewLine', lastLine)\n})\n\nsocket.on('game_answered', ({ alreadyDone, success, teacherphone, answer }) => {\n  if (alreadyDone) {\n    MessageBox.alert('当前问题已经被回答，您不能继续回答了！')\n    return\n  }\n  if (!success) {\n    Notification.error(`玩家 ${teacherphone} 回答的的答案不对：${answer}`)\n    return\n  }\n\n  MessageBox.alert(`玩家 ${teacherphone} 回答了正确的答案：${answer}`, {\n    title: '恭喜',\n    type: 'success'\n  })\n})\n\nsocket.on('user_leave', teacherphone => {\n  store.commit('delFromteacherphones', teacherphone)\n\n  if (teacherphone === store.state.holder) {\n    store.commit('updateHolder', '')\n    store.commit('updateLines', [])\n    Notification.error('老师离开了教室!')\n  }\n})\n\nexport default socket\n"]}]}
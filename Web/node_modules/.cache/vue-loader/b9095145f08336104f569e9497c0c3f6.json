{"remainingRequest":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/views/test2.vue?vue&type=style&index=0&id=d9b7f794&lang=less&scoped=true&","dependencies":[{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/views/test2.vue","mtime":1630396746442},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/less-loader/dist/cjs.js","mtime":1629251458000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtY29udGFpbmVyewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBhcXVhOwogICAgLyogb3ZlcmZsb3c6IGF1dG87ICovCiAgICAuZWwtaGVhZGVyewogICAgICAgIGxpbmUtaGVpZ2h0OiA2MHB4OwogICAgfQoKICAgIC5lbC1tYWluewogICAgICAgIGJhY2tncm91bmQtY29sb3I6IGFxdWFtYXJpbmU7CiAgICAgICAgb3ZlcmZsb3c6IGF1dG87CiAgICAgICAgLmVsLXJvdyB7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgICAgICAgIGhlaWdodDogNTAlOwogICAgICAgIH0gCiAgICAgICAgLmVsLWNvbCB7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgaGVpZ2h0OiA5MCU7CgogICAgICAgICAgICAuYmctcHVycGxlIHsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkM2RjZTY7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLmdyaWQtY29udGVudCB7CiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgZmxleC1mbG93OiBjb2x1bW47CgogICAgICAgICAgICAgICAgLnVzZXJpbmZvewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrOwogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjRkZGRkZGOwogICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICAgICAgICAgICAgICAgIGhlaWdodDogNDBweDsKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogNDBweDsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7CiAgICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDNweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQouZWwtY2FyZHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAzMDBweDsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigzMywgMzMsIDMzKTsKICAgIGNvbG9yOiAjRkZGRkZGOwp9Cg=="},{"version":3,"sources":["test2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"test2.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<el-container>\n    <el-header>\n        <el-tag>房间号：{{classCode}}</el-tag> \n        <!-- <el-button @click = \"test\">test</el-button>\n        <el-button @click = \"clear\">clear</el-button> -->\n    </el-header>\n    <el-main>\n        <el-row :gutter=\"20\" v-for=\"i in 4\" :key=\"i\">\n            <el-col :span=\"4\" v-for=\"j in 6\" :key=\"j\">\n                <div class=\"grid-content bg-purple\">\n                    <div class=\"userinfo\">{{(i-1)*6 + j}}</div>\n                        <el-card ref=\"wrapper\" :body-style=\"{ padding: 0 }\" id=\"card1\">\n                            <!-- {{(i-1)*6 + j}} -->\n                            {{6 * i - 6 + j}}\n                            <v-stage\n                            :id=\"'stage' + ((i-1)*6 + j)\"\n                            :config=\"stageConfig\"\n                            @mousedown=\"mousedownHandler\"\n                            @mouseup=\"mouseupHandler\"\n                            @mousemove=\"mousemoveHandler\"\n                            >\n                            <v-layer>\n                                <v-line\n                                v-for=\"(line, index) in initexam[indexTopic[6 * i - 7 + j]]\"\n                                :key=\"index\"\n                                :config=\"{\n                                    stroke: '#FFF111',\n                                    strokeWidth:1.5,\n                                    points:line.points,\n                                    lineCap: line.lineCap,\n                                    lineJoin: line.lineJoin,\n                                    bezier:line.bezier,\n                                    rotation:line.rotation,}\"\n                                />\n                            </v-layer>\n                            <v-layer>\n                                <v-line\n                                v-for=\"(line, index) in stuTopic[6 * i - 7 + j][indexTopic[6 * i - 7 + j]]\"\n                                :key=\"index\"\n                                :config=\"{\n                                    stroke: '#FFFFFF',\n                                    strokeWidth:1.5,\n                                    points:line.points,\n                                    lineCap: line.lineCap,\n                                    lineJoin: line.lineJoin,\n                                    bezier:line.bezier,\n                                    rotation:line.rotation,}\"\n                                />\n                            </v-layer>\n                            <v-layer>\n                                <v-line\n                                v-for=\"(line, index) in teacherLines[(i-1)*6 + j - 1]\"\n                                :key=\"index\"\n                                :config=\"line\"\n                                />\n                            </v-layer>\n                            <v-layer>\n                                <v-line\n                                v-for=\"(line, index) in teacherLines2[(i-1)*6 + j - 1]\"\n                                :key=\"index\"\n                                :config=\"line\"\n                                />\n                            </v-layer>\n                        </v-stage>\n                    </el-card>\n                </div>\n            </el-col>\n        </el-row>     \n    </el-main>\n</el-container>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex'\nexport default {\n    created() {\n    this.$store.dispatch('sendUserEnter')\n    const that = this\n    let exam = []\n      this.axios.get('http://192.168.51.109:3000/exam',{\n      }).then((res)=>{\n        for (let k = 0; k < res.data.message.length; k++) {\n          const count = JSON.parse(res.data.message[k].topic_content)\n          for (let i = 0; i < count.length; i++) {\n            for (let j = 0; j < count[i].points.length; j++) {\n              if(j % 2 == 0){\n                count[i].points[j] *= that.getXb\n              }else{\n                count[i].points[j] *= that.getYb\n              }\n            }\n          }\n          exam[k] = count\n        }\n        this.$store.commit('initexam', exam)\n      })\n\n\n      this.axios.get('http://192.168.51.109:3000/teacher/gettopic').then((res)=>{\n      let topic = Array.apply(null,Array(20)).map(() => [])\n      for (let i = 0; i < res.data.message.length; i++) {\n       let code = parseInt(res.data.message[i].stucode.slice(6,res.data.message[i].stucode.length))\n       topic[code - 1].push(res.data.message[i])\n      }\n\n      for (let i = 0; i < topic.length; i++) {\n        for (let j = 0; j < topic[i].length; j++) {\n          let count2 = JSON.parse(topic[i][j].stuanswer)\n          for (let k = 0; k < count2.length; k++) {\n            for (let m = 0; m < count2[k].points.length; m++) {\n              if(m % 2 == 0){\n                count2[k].points[m] *= that.getXb\n              }else{\n                count2[k].points[m] *= that.getYb\n              }\n            }\n            topic[i][j] = count2\n          }\n        }\n      }\n      this.$store.commit('initstuTopic', topic)\n    })\n  },\ncomputed: {\n    ...mapState([\"teacherLines\",\"teacherLines2\",\"initexam\"]),\n    ...mapGetters(['isGameStarted', 'isGameHolder']),\n    ...mapState(['teacherphone', 'messages', 'holder']),\n    indexTopic(){\n      // console.log(1);\n      this.axios.get('http://192.168.51.109:3000/teacher/gettopic').then((res)=>{\n      let topic = Array.apply(null,Array(20)).map(() => [])\n      for (let i = 0; i < res.data.message.length; i++) {\n       let code = parseInt(res.data.message[i].stucode.slice(6,res.data.message[i].stucode.length))\n       topic[code - 1].push(res.data.message[i])\n      }\n\n      for (let i = 0; i < topic.length; i++) {\n        for (let j = 0; j < topic[i].length; j++) {\n          let count2 = JSON.parse(topic[i][j].stuanswer)\n          for (let k = 0; k < count2.length; k++) {\n            for (let m = 0; m < count2[k].points.length; m++) {\n              if(m % 2 == 0){\n                count2[k].points[m] *= that.getXb\n              }else{\n                count2[k].points[m] *= that.getYb\n              }\n            }\n            topic[i][j] = count2\n          }\n        }\n      }\n      this.$store.commit('initstuTopic', topic)\n    })\n\n      return this.$store.state.indexTopic\n    },\n    stuTopic(){\n      if(this.$store.state.stuTopic[0] === undefined){\n        const arr = Array.apply(null,Array(20)).map(() => [[]])\n        return arr;\n      }else{\n        // console.log(1);\n        return this.$store.state.stuTopic\n      }\n      \n    }\n},\nmounted(){\n//    document.getElementById('card1').style.height = document.getElementById('card1').clientWidth * 1.1 + \"px\"\n    this.getXb =  document.getElementById('card1').clientWidth\n    this.getYb =  document.getElementById('card1').clientHeight\n    // document.getElementById('card1').translate(0.5,0.5)\n    this.stageConfig.width = document.getElementById('card1').clientWidth\n    this.stageConfig.height = document.getElementById('card1').clientHeight\n    this.$store.commit('initXb', this.getXb)\n    this.$store.commit('initYb', this.getYb)\n \n    \n},\ndata(){\n    return{\n        classCode:1101,\n        // 画布配置\n      stageConfig: {\n        width: 1300,\n        height: 450\n      },\n      // 绘画状态\n      painting: false,\n      stroke: '#d42d1f',\n      strokeWidth: 2.1,\n      getXb:1,\n      getYb:1,\n      exam:[],\n    }\n},\nmethods: {\n  test(){\nthis.$store.commit('test')\n  },\n  clear(){\nthis.$store.commit('clear')\n  },\n    // 鼠标按下\n    mousedownHandler(e) {\n      this.painting = true\n        const newLine = {\n        stroke: this.stroke,\n        strokeWidth: this.strokeWidth,\n        points: [e.evt.layerX / this.getXb, e.evt.layerY / this.getYb]\n      }\n      const id = e.currentTarget.attrs.id.slice(5,e.currentTarget.attrs.id.length)\n      // 请求服务器\n      this.$store.dispatch('teachersendDrawNewLine', {newLine:newLine,id:id})\n      // 本地画线, 存到vuex中\n        this.$store.commit('teacherdrawNewLine', {newLine:newLine,a:e.currentTarget.attrs.id})\n    },\n\n    // 鼠标拖动\n    mousemoveHandler(e) {\n      if (!this.painting) return\n      let lastLine;\n      let a = e.currentTarget.attrs.id.slice(5,e.currentTarget.attrs.id.length)\n      const id = e.currentTarget.attrs.id.slice(5,e.currentTarget.attrs.id.length)\n      lastLine = this.teacherLines2[a - 1][this.teacherLines2[a - 1].length - 1]\n      lastLine.points = lastLine.points.concat([e.evt.layerX / this.getXb, e.evt.layerY / this.getYb]) \n      // 请求服务器\n      this.$store.dispatch('teachersendUpdateNewLine', {lastLine:lastLine,id:id})\n      this.$store.commit('teacherupdateNewLine1', {lastLine:lastLine,a:e.currentTarget.attrs.id})\n      \n    },\n\n    // 鼠标释放\n    mouseupHandler() {\n      this.painting = false\n    },\n}\n\n}\n</script>\n<style lang = \"less\" scoped>\n.el-container{\n    width: 100%;\n    height: 100%;\n    background-color: aqua;\n    /* overflow: auto; */\n    .el-header{\n        line-height: 60px;\n    }\n\n    .el-main{\n        background-color: aquamarine;\n        overflow: auto;\n        .el-row {\n            margin-bottom: 20px;\n            height: 50%;\n        } \n        .el-col {\n            border-radius: 4px;\n            height: 90%;\n\n            .bg-purple {\n                background: #d3dce6;\n            }\n            .grid-content {\n                border-radius: 4px;\n                height: 100%;\n                display: flex;\n                flex-flow: column;\n\n                .userinfo{\n                    background-color: black;\n                    color: #FFFFFF;\n                    font-weight: bold;\n                    height: 40px;\n                    line-height: 40px;\n                    padding-left: 10px;\n                    letter-spacing: 3px;\n                }\n            }\n        }\n    }\n}\n.el-card{\n    width: 100%;\n    height: 300px;\n    background-color: rgb(33, 33, 33);\n    color: #FFFFFF;\n}\n</style>"]}]}
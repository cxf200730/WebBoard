{"remainingRequest":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/views/test2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/views/test2.vue","mtime":1631089051491},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCcKZXhwb3J0IGRlZmF1bHQgewpjcmVhdGVkKCkgewogIC8vIOmhtemdouWIneWni+WMlu+8jOi/nuaOpXNvY2tldAogIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZW5kVXNlckVudGVyJykKICBjb25zdCB0aGF0ID0gdGhpcwogIGxldCBleGFtID0gW10KICAvLyDojrflj5bor5XljbcKICB0aGlzLmF4aW9zLmdldCgnaHR0cDovLzE5Mi4xNjguNTEuMTE3OjMwMDAvZXhhbScsewogIH0pLnRoZW4oKHJlcyk9PnsKICAgIGZvciAobGV0IGsgPSAwOyBrIDwgcmVzLmRhdGEubWVzc2FnZS5sZW5ndGg7IGsrKykgewogICAgICBjb25zdCBjb3VudCA9IEpTT04ucGFyc2UocmVzLmRhdGEubWVzc2FnZVtrXS50b3BpY19jb250ZW50KQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb3VudFtpXS5wb2ludHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmKGogJSAyID09IDApewogICAgICAgICAgICBjb3VudFtpXS5wb2ludHNbal0gKj0gdGhhdC5nZXRYYgogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGNvdW50W2ldLnBvaW50c1tqXSAqPSB0aGF0LmdldFliCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGV4YW1ba10gPSBjb3VudAogICAgfQogICAgLy8g5L+d5a2Y5YiwVnVlWOS4rQogICAgdGhpcy4kc3RvcmUuY29tbWl0KCdpbml0ZXhhbScsIGV4YW0pCiAgfSkKCiAgLy8g6I635Y+W5a2m55Sf562U6aKY6K6w5b2V5ZKM6ICB5biI5om55pS56K6w5b2VCiAgdGhpcy5heGlvcy5nZXQoJ2h0dHA6Ly8xOTIuMTY4LjUxLjExNzozMDAwL3RlYWNoZXIvZ2V0dG9waWMnKS50aGVuKChyZXMpPT57CiAgICAgIGxldCB0b3BpYyA9IEFycmF5LmFwcGx5KG51bGwsQXJyYXkoMjApKS5tYXAoKCkgPT4gW10pCiAgICAgIGxldCB0b3BpYzIgPSBBcnJheS5hcHBseShudWxsLEFycmF5KDIwKSkubWFwKCgpID0+IFtdKQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLm1lc3NhZ2UubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgY29kZSA9IHBhcnNlSW50KHJlcy5kYXRhLm1lc3NhZ2VbaV0uc3R1Y29kZS5zbGljZSg2LHJlcy5kYXRhLm1lc3NhZ2VbaV0uc3R1Y29kZS5sZW5ndGgpKQogICAgICAgIHRvcGljW2NvZGUgLSAxXVtwYXJzZUludChyZXMuZGF0YS5tZXNzYWdlW2ldLnRvcGljX2luZGV4KSAtIDFdID0gcmVzLmRhdGEubWVzc2FnZVtpXQogICAgICB9CiAgICAgIC8vIOaMieavlOS+i+aUvuWkp+WdkOaghwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvcGljLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0b3BpY1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYodG9waWNbaV1bal0gPT0gdW5kZWZpbmVkKXsKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICBsZXQgY291bnQyID0gSlNPTi5wYXJzZSh0b3BpY1tpXVtqXS5zdHVhbnN3ZXIpCiAgICAgICAgICAgIGxldCBjb3VudDMgPSBKU09OLnBhcnNlKHRvcGljW2ldW2pdLnVwZGF0ZWFuc3dlcikKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY291bnQyKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY291bnQzKTsKICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb3VudDIubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICBmb3IgKGxldCBtID0gMDsgbSA8IGNvdW50MltrXS5wb2ludHMubGVuZ3RoOyBtKyspIHsKICAgICAgICAgICAgICAgIGlmKG0gJSAyID09IDApewogICAgICAgICAgICAgICAgICBjb3VudDJba10ucG9pbnRzW21dICo9IHRoYXQuZ2V0WGIKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICBjb3VudDJba10ucG9pbnRzW21dICo9IHRoYXQuZ2V0WWIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdG9waWNbaV1bal0gPSBjb3VudDIKICAgICAgICAgICAgfQogICAgICAgICAgICBpZihjb3VudDMgIT0gbnVsbCl7CiAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb3VudDMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IG0gPSAwOyBtIDwgY291bnQzW2tdLnBvaW50cy5sZW5ndGg7IG0rKykgewogICAgICAgICAgICAgICAgICBpZihtICUgMiA9PSAwKXsKICAgICAgICAgICAgICAgICAgICBjb3VudDNba10ucG9pbnRzW21dICo9IHRoYXQuZ2V0WGIKICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgY291bnQzW2tdLnBvaW50c1ttXSAqPSB0aGF0LmdldFliCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRvcGljMltpXVtqXSA9IGNvdW50MwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2luaXRzdHVUb3BpYycsIHRvcGljKQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2luaXRzdHVUb3BpYzInLCB0b3BpYzIpCiAgICB9KQogIAp9LAoKY29tcHV0ZWQ6IHsKICAvLyDlrabnlJ/lrp7ml7bnlLvnmoTnur/vvIzogIHluIjlrp7ml7bnmoTnur/vvIzor5Xljbcs5a2m55Sf562U6aKY6K6w5b2VCiAgLi4ubWFwU3RhdGUoWyJ0ZWFjaGVyTGluZXMiLCJ0ZWFjaGVyTGluZXMyIiwiaW5pdGV4YW0iLCJpbmRleFRvcGljIl0pLAoKICBzdHVUb3BpYygpewogICAgaWYodGhpcy4kc3RvcmUuc3RhdGUuc3R1VG9waWNbMF0gPT09IHVuZGVmaW5lZCl7CiAgICAgIGNvbnN0IGFyciA9IEFycmF5LmFwcGx5KG51bGwsQXJyYXkoMjApKS5tYXAoKCkgPT4gW1tdXSkKICAgICAgcmV0dXJuIGFycjsKICAgIH1lbHNlewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc3R1VG9waWMKICAgIH0KICB9LAogIHN0dVRvcGljMigpewogICAgaWYodGhpcy4kc3RvcmUuc3RhdGUuc3R1VG9waWMyWzBdID09PSB1bmRlZmluZWQpewogICAgICBjb25zdCBhcnIgPSBBcnJheS5hcHBseShudWxsLEFycmF5KDIwKSkubWFwKCgpID0+IFtbXV0pCiAgICAgIHJldHVybiBhcnI7CiAgICB9ZWxzZXsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnN0dVRvcGljMgogICAgfQogICAgCiAgfQp9LAptb3VudGVkKCl7CiAgdGhpcy5nZXRYYiA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZDEnKS5jbGllbnRXaWR0aAogIHRoaXMuZ2V0WWIgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmQxJykuY2xpZW50SGVpZ2h0CiAgdGhpcy5zdGFnZUNvbmZpZy53aWR0aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkMScpLmNsaWVudFdpZHRoCiAgdGhpcy5zdGFnZUNvbmZpZy5oZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZDEnKS5jbGllbnRIZWlnaHQKICB0aGlzLiRzdG9yZS5jb21taXQoJ2luaXRYYicsIHRoaXMuZ2V0WGIpCiAgdGhpcy4kc3RvcmUuY29tbWl0KCdpbml0WWInLCB0aGlzLmdldFliKQoKICAgIAp9LApkYXRhKCl7CiAgICByZXR1cm57CiAgICAgICAgY2xhc3NDb2RlOjExMDEsCiAgICAgICAgLy8g55S75biD6YWN572uCiAgICAgIHN0YWdlQ29uZmlnOiB7CiAgICAgICAgd2lkdGg6IDEzMDAsCiAgICAgICAgaGVpZ2h0OiA0NTAKICAgICAgfSwKICAgICAgLy8g57uY55S754q25oCBCiAgICAgIHBhaW50aW5nOiBmYWxzZSwKICAgICAgc3Ryb2tlOiAnI2Q0MmQxZicsCiAgICAgIHN0cm9rZVdpZHRoOiAyLjEsCiAgICAgIGdldFhiOjEsCiAgICAgIGdldFliOjEsCiAgICAgIGV4YW06W10sCiAgICB9Cn0sCm1ldGhvZHM6IHsKICBvcGVuU2F5KGluZGV4KXsKICAgIGFsZXJ0KGluZGV4KQp9LAogIHRlc3QoKXsKdGhpcy4kc3RvcmUuY29tbWl0KCd0ZXN0JykKICB9LAogIGNsZWFyKCl7CnRoaXMuJHN0b3JlLmNvbW1pdCgnY2xlYXInKQogIH0sCiAgICAvLyDpvKDmoIfmjInkuIsKICAgIG1vdXNlZG93bkhhbmRsZXIoZSkgewogICAgICB0aGlzLnBhaW50aW5nID0gdHJ1ZQogICAgICAgIGNvbnN0IG5ld0xpbmUgPSB7CiAgICAgICAgc3Ryb2tlOiB0aGlzLnN0cm9rZSwKICAgICAgICBzdHJva2VXaWR0aDogdGhpcy5zdHJva2VXaWR0aCwKICAgICAgICBwb2ludHM6IFtlLmV2dC5sYXllclggLyB0aGlzLmdldFhiLCBlLmV2dC5sYXllclkgLyB0aGlzLmdldFliXQogICAgICB9CiAgICAgIGNvbnN0IGlkID0gZS5jdXJyZW50VGFyZ2V0LmF0dHJzLmlkLnNsaWNlKDUsZS5jdXJyZW50VGFyZ2V0LmF0dHJzLmlkLmxlbmd0aCkKICAgICAgLy8g6K+35rGC5pyN5Yqh5ZmoCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0ZWFjaGVyc2VuZERyYXdOZXdMaW5lJywge25ld0xpbmU6bmV3TGluZSxpZDppZH0pCiAgICAgIC8vIOacrOWcsOeUu+e6vywg5a2Y5YiwdnVleOS4rQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndGVhY2hlcmRyYXdOZXdMaW5lJywge25ld0xpbmU6bmV3TGluZSxhOmUuY3VycmVudFRhcmdldC5hdHRycy5pZH0pCiAgICB9LAoKICAgIC8vIOm8oOagh+aLluWKqAogICAgbW91c2Vtb3ZlSGFuZGxlcihlKSB7CiAgICAgIGlmICghdGhpcy5wYWludGluZykgcmV0dXJuCiAgICAgIGxldCBsYXN0TGluZTsKICAgICAgbGV0IGEgPSBlLmN1cnJlbnRUYXJnZXQuYXR0cnMuaWQuc2xpY2UoNSxlLmN1cnJlbnRUYXJnZXQuYXR0cnMuaWQubGVuZ3RoKQogICAgICBjb25zdCBpZCA9IGUuY3VycmVudFRhcmdldC5hdHRycy5pZC5zbGljZSg1LGUuY3VycmVudFRhcmdldC5hdHRycy5pZC5sZW5ndGgpCiAgICAgIGxhc3RMaW5lID0gdGhpcy50ZWFjaGVyTGluZXMyW2EgLSAxXVt0aGlzLnRlYWNoZXJMaW5lczJbYSAtIDFdLmxlbmd0aCAtIDFdCiAgICAgIGxhc3RMaW5lLnBvaW50cyA9IGxhc3RMaW5lLnBvaW50cy5jb25jYXQoW2UuZXZ0LmxheWVyWCAvIHRoaXMuZ2V0WGIsIGUuZXZ0LmxheWVyWSAvIHRoaXMuZ2V0WWJdKSAKICAgICAgLy8g6K+35rGC5pyN5Yqh5ZmoCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0ZWFjaGVyc2VuZFVwZGF0ZU5ld0xpbmUnLCB7bGFzdExpbmU6bGFzdExpbmUsaWQ6aWR9KQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3RlYWNoZXJ1cGRhdGVOZXdMaW5lMScsIHtsYXN0TGluZTpsYXN0TGluZSxhOmUuY3VycmVudFRhcmdldC5hdHRycy5pZH0pCiAgICAgIAogICAgfSwKCiAgICAvLyDpvKDmoIfph4rmlL4KICAgIG1vdXNldXBIYW5kbGVyKCkgewogICAgICB0aGlzLnBhaW50aW5nID0gZmFsc2UKICAgIH0sCn0KCn0K"},{"version":3,"sources":["test2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"test2.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<el-container>\n  <el-header>\n      <el-tag>房间号：{{classCode}}</el-tag>\n  </el-header>\n  <el-main>\n    <el-row :gutter=\"20\" v-for=\"i in 4\" :key=\"i\">\n      <el-col :span=\"4\" v-for=\"j in 6\" :key=\"j\">\n        <div class=\"grid-content bg-purple\">\n          <div class=\"userinfo\">\n            <i>{{(i-1)*6 + j}}</i>\n            <el-button size=\"mini\" @click=\"openSay((i-1)*6 + j)\">连接</el-button>\n          </div>\n          <el-card ref=\"wrapper\" :body-style=\"{ padding: 0 }\" id=\"card1\">\n            <v-stage\n              :id=\"'stage' + ((i-1)*6 + j)\"\n              :config=\"stageConfig\"\n              @mousedown=\"mousedownHandler\"\n              @mouseup=\"mouseupHandler\"\n              @mousemove=\"mousemoveHandler\"\n              >\n              <!-- 试卷题目 initexam-->\n              <v-layer>\n                <v-line\n                v-for=\"(line, index) in initexam[indexTopic[6 * i - 7 + j]]\"\n                :key=\"index\"\n                :config=\"{\n                    stroke: '#FFF111',\n                    strokeWidth:1.5,\n                    points:line.points,\n                    lineCap: line.lineCap,\n                    lineJoin: line.lineJoin,\n                    bezier:line.bezier,\n                    rotation:line.rotation,}\"\n                />\n              </v-layer>\n              <!-- 学生答题记录 stuTopic-->\n              <v-layer>\n                <v-line\n                v-for=\"(line, index) in stuTopic[6 * i - 7 + j][indexTopic[6 * i - 7 + j]]\"\n                :key=\"index\"\n                :config=\"{\n                    stroke: '#FFFFFF',\n                    strokeWidth:1.5,\n                    points:line.points,\n                    lineCap: line.lineCap,\n                    lineJoin: line.lineJoin,\n                    bezier:line.bezier,\n                    rotation:line.rotation,}\"\n                />\n              </v-layer>\n              <!--  老师批改记录 stuTopic2-->\n              <v-layer>\n                <v-line\n                v-for=\"(line, index) in stuTopic2[6 * i - 7 + j][indexTopic[6 * i - 7 + j]]\"\n                :key=\"index\"\n                :config=\"{\n                    stroke: '#d42d1f',\n                    strokeWidth:1.5,\n                    points:line.points,\n                    lineCap: line.lineCap,\n                    lineJoin: line.lineJoin,\n                    bezier:line.bezier,\n                    rotation:line.rotation,}\"\n                />\n              </v-layer>\n              <!-- teacherLines 学生实时画的线 -->\n              <v-layer>\n                <v-line\n                v-for=\"(line, index) in teacherLines[(i-1)*6 + j - 1]\"\n                :key=\"index\"\n                :config=\"line\"\n                />\n              </v-layer>\n              <!-- teacherLines2 老师实时画的线 -->\n              <v-layer>\n                <v-line\n                v-for=\"(line, index) in teacherLines2[(i-1)*6 + j - 1]\"\n                :key=\"index\"\n                :config=\"line\"\n                />\n              </v-layer>\n            </v-stage>\n          </el-card>\n        </div>\n      </el-col>\n    </el-row>     \n  </el-main>\n</el-container>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex'\nexport default {\ncreated() {\n  // 页面初始化，连接socket\n  this.$store.dispatch('sendUserEnter')\n  const that = this\n  let exam = []\n  // 获取试卷\n  this.axios.get('http://192.168.51.117:3000/exam',{\n  }).then((res)=>{\n    for (let k = 0; k < res.data.message.length; k++) {\n      const count = JSON.parse(res.data.message[k].topic_content)\n      for (let i = 0; i < count.length; i++) {\n        for (let j = 0; j < count[i].points.length; j++) {\n          if(j % 2 == 0){\n            count[i].points[j] *= that.getXb\n          }else{\n            count[i].points[j] *= that.getYb\n          }\n        }\n      }\n      exam[k] = count\n    }\n    // 保存到VueX中\n    this.$store.commit('initexam', exam)\n  })\n\n  // 获取学生答题记录和老师批改记录\n  this.axios.get('http://192.168.51.117:3000/teacher/gettopic').then((res)=>{\n      let topic = Array.apply(null,Array(20)).map(() => [])\n      let topic2 = Array.apply(null,Array(20)).map(() => [])\n      for (let i = 0; i < res.data.message.length; i++) {\n        let code = parseInt(res.data.message[i].stucode.slice(6,res.data.message[i].stucode.length))\n        topic[code - 1][parseInt(res.data.message[i].topic_index) - 1] = res.data.message[i]\n      }\n      // 按比例放大坐标\n      for (let i = 0; i < topic.length; i++) {\n        for (let j = 0; j < topic[i].length; j++) {\n          if(topic[i][j] == undefined){\n          }else{\n            let count2 = JSON.parse(topic[i][j].stuanswer)\n            let count3 = JSON.parse(topic[i][j].updateanswer)\n            // console.log(count2);\n            // console.log(count3);\n            for (let k = 0; k < count2.length; k++) {\n              for (let m = 0; m < count2[k].points.length; m++) {\n                if(m % 2 == 0){\n                  count2[k].points[m] *= that.getXb\n                }else{\n                  count2[k].points[m] *= that.getYb\n                }\n              }\n              topic[i][j] = count2\n            }\n            if(count3 != null){\n              for (let k = 0; k < count3.length; k++) {\n                for (let m = 0; m < count3[k].points.length; m++) {\n                  if(m % 2 == 0){\n                    count3[k].points[m] *= that.getXb\n                  }else{\n                    count3[k].points[m] *= that.getYb\n                  }\n                }\n                topic2[i][j] = count3\n              }\n            }\n          }\n        }\n      }\n      this.$store.commit('initstuTopic', topic)\n      this.$store.commit('initstuTopic2', topic2)\n    })\n  \n},\n\ncomputed: {\n  // 学生实时画的线，老师实时的线，试卷,学生答题记录\n  ...mapState([\"teacherLines\",\"teacherLines2\",\"initexam\",\"indexTopic\"]),\n\n  stuTopic(){\n    if(this.$store.state.stuTopic[0] === undefined){\n      const arr = Array.apply(null,Array(20)).map(() => [[]])\n      return arr;\n    }else{\n      return this.$store.state.stuTopic\n    }\n  },\n  stuTopic2(){\n    if(this.$store.state.stuTopic2[0] === undefined){\n      const arr = Array.apply(null,Array(20)).map(() => [[]])\n      return arr;\n    }else{\n      return this.$store.state.stuTopic2\n    }\n    \n  }\n},\nmounted(){\n  this.getXb =  document.getElementById('card1').clientWidth\n  this.getYb =  document.getElementById('card1').clientHeight\n  this.stageConfig.width = document.getElementById('card1').clientWidth\n  this.stageConfig.height = document.getElementById('card1').clientHeight\n  this.$store.commit('initXb', this.getXb)\n  this.$store.commit('initYb', this.getYb)\n\n    \n},\ndata(){\n    return{\n        classCode:1101,\n        // 画布配置\n      stageConfig: {\n        width: 1300,\n        height: 450\n      },\n      // 绘画状态\n      painting: false,\n      stroke: '#d42d1f',\n      strokeWidth: 2.1,\n      getXb:1,\n      getYb:1,\n      exam:[],\n    }\n},\nmethods: {\n  openSay(index){\n    alert(index)\n},\n  test(){\nthis.$store.commit('test')\n  },\n  clear(){\nthis.$store.commit('clear')\n  },\n    // 鼠标按下\n    mousedownHandler(e) {\n      this.painting = true\n        const newLine = {\n        stroke: this.stroke,\n        strokeWidth: this.strokeWidth,\n        points: [e.evt.layerX / this.getXb, e.evt.layerY / this.getYb]\n      }\n      const id = e.currentTarget.attrs.id.slice(5,e.currentTarget.attrs.id.length)\n      // 请求服务器\n      this.$store.dispatch('teachersendDrawNewLine', {newLine:newLine,id:id})\n      // 本地画线, 存到vuex中\n        this.$store.commit('teacherdrawNewLine', {newLine:newLine,a:e.currentTarget.attrs.id})\n    },\n\n    // 鼠标拖动\n    mousemoveHandler(e) {\n      if (!this.painting) return\n      let lastLine;\n      let a = e.currentTarget.attrs.id.slice(5,e.currentTarget.attrs.id.length)\n      const id = e.currentTarget.attrs.id.slice(5,e.currentTarget.attrs.id.length)\n      lastLine = this.teacherLines2[a - 1][this.teacherLines2[a - 1].length - 1]\n      lastLine.points = lastLine.points.concat([e.evt.layerX / this.getXb, e.evt.layerY / this.getYb]) \n      // 请求服务器\n      this.$store.dispatch('teachersendUpdateNewLine', {lastLine:lastLine,id:id})\n      this.$store.commit('teacherupdateNewLine1', {lastLine:lastLine,a:e.currentTarget.attrs.id})\n      \n    },\n\n    // 鼠标释放\n    mouseupHandler() {\n      this.painting = false\n    },\n}\n\n}\n</script>\n<style lang = \"less\" scoped>\n.el-container{\n    width: 100%;\n    height: 100%;\n    background-color: aqua;\n    /* overflow: auto; */\n    .el-header{\n        line-height: 60px;\n    }\n\n    .el-main{\n        background-color: aquamarine;\n        overflow: auto;\n        .el-row {\n            margin-bottom: 20px;\n            height: 50%;\n        } \n        .el-col {\n            border-radius: 4px;\n            height: 90%;\n\n            .bg-purple {\n                background: #d3dce6;\n            }\n            .grid-content {\n                border-radius: 4px;\n                height: 100%;\n                display: flex;\n                flex-flow: column;\n\n                .userinfo{\n                    background-color: black;\n                    color: #FFFFFF;\n                    font-weight: bold;\n                    height: 40px;\n                    line-height: 40px;\n                    padding-left: 10px;\n                    letter-spacing: 3px;\n                    justify-content: space-between;\n                    display: flex;\n                }\n            }\n        }\n    }\n}\n.el-card{\n    width: 100%;\n    height: 300px;\n    background-color: rgb(33, 33, 33);\n    color: #FFFFFF;\n}\n</style>"]}]}
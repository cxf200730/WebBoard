{"remainingRequest":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/src/views/Game/components/app-stage.vue?vue&type=style&index=0&id=6a26facc&lang=scss&scoped=true&","dependencies":[{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/src/views/Game/components/app-stage.vue","mtime":1629251324730},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLWNhcmRfX2JvZHl7Cgp9Cg=="},{"version":3,"sources":["app-stage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;;AAEA","file":"app-stage.vue","sourceRoot":"src/views/Game/components","sourcesContent":["<template>\n  <el-card ref=\"wrapper\" :body-style=\"{ padding: 0}\">\n    <v-stage\n      :config=\"stageConfig\"\n      @mousedown=\"mousedownHandler\"\n      @mouseup=\"mouseupHandler\"\n      @mousemove=\"mousemoveHandler\"\n    >\n      <v-layer>\n        <v-line\n          v-for=\"(line, index) in lines\"\n          :key=\"index\"\n          :config=\"line\"\n        />\n      </v-layer>\n    </v-stage>\n  </el-card>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex'\nexport default {\n  created(){\n    console.log(\"罗博版的宽和高\" + 29000 + \" \" +  21000);\n    console.log(\"屏幕的宽和高：\" + window.screen.width + \" \" +  window.screen.height )\n    // console.log(\"网页的宽和高：\" + window.screen.availWidth+ \" \" +window.screen.availHeight)\n    // console.log(\"网页内容的宽和高：\" + window.innerWidth + \" \" +  window.innerHeight)\n    console.log(\"宽高比\" + 29000 / window.screen.width + \" \" +  21000 / window.screen.height);\n  \n  },\n  data() {\n    return {\n      // 画布配置\n      stageConfig: {\n        width: 870,\n        height: 630\n      },\n      // 绘画状态\n      painting: false,\n      stroke: '#df4b26',\n      strokeWidth: 2\n    }\n  },\n  computed: {\n    ...mapState(['lines']),\n    ...mapGetters(['isGameStarted', 'isGameHolder'])\n  },\n\n  mounted() {\n    // 将画布宽度设置与容器同宽\n    this.stageConfig.width = this.$refs.wrapper.$el.offsetWidth\n  },\n\n  methods: {\n    // 鼠标按下\n    mousedownHandler(e) {\n      if (!this.isGameHolder || !this.isGameHolder) return\n\n      this.painting = true\n      // 创建一个新线条\n      const newLine = {\n        stroke: this.stroke,\n        strokeWidth: this.strokeWidth,\n        points: [e.evt.layerX, e.evt.layerY]\n      }\n      // 本地画线, 存到vuex中\n      this.$store.commit('drawNewLine', newLine)\n      // 请求服务器\n      this.$store.dispatch('sendDrawNewLine', newLine)\n\n      // e = window.event || e;\n      // console.log(e.clientX + \" \" + e.clientY);\n    },\n\n    // 鼠标拖动\n    mousemoveHandler(e) {\n      // e = window.event || e;\n      // console.log(e.screenX + \" \" + e.screenY);\n      if (!this.painting) return\n      const lastLine = this.lines[this.lines.length - 1]\n      lastLine.points = lastLine.points.concat([e.evt.layerX, e.evt.layerY])\n      console.log(lastLine.points)\n      this.$store.commit('updateNewLine', lastLine)\n      // 请求服务器\n      this.$store.dispatch('sendUpdateNewLine', lastLine)\n      \n    },\n\n    // 鼠标释放\n    mouseupHandler() {\n      this.painting = false\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.el-card__body{\n\n}\n</style>"]}]}
{"remainingRequest":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/views/test.vue?vue&type=style&index=0&id=5752faac&lang=less&scoped=true&","dependencies":[{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/views/test.vue","mtime":1630492808402},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/less-loader/dist/cjs.js","mtime":1629251458000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtY29udGFpbmVyewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBhcXVhOwoKICAgIC5lbC1oZWFkZXJ7CiAgICAgICAgbGluZS1oZWlnaHQ6IDYwcHg7CiAgICB9CgogICAgLmVsLW1haW57CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYXF1YW1hcmluZTsKICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAKICAgICAgICAuYmctZjJ7CiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOwogICAgICAgIH0KICAgICAgICB2aWRlb3sKICAgICAgICAgICAgd2lkdGg6IDMyMHB4OwogICAgICAgICAgICBoZWlnaHQ6IGF1dG87CiAgICAgICAgfQogICAgICAgIC52aWRlb1Jvd3sKICAgICAgICAgICAgbWFyZ2luLXRvcDogMzBweDsKICAgICAgICB9CiAgICAgICAgI3ByZXZpZXdMYWJlbHsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAKICAgIH0KfQouZWwtY2FyZHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwp9Cg=="},{"version":3,"sources":["test.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA","file":"test.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<el-container>\n    <el-header>\n        \n    </el-header>\n    <el-main>\n            <div class=\"my-3 p-3 bg-white rounded box-shadow small\">\n\n      <h6 class=\"border-bottom border-gray pb-2 mb-0 pureAudioContent\">推拉纯音频流</h6>\n\n      <div class=\"row\" style=\"margin-top:1%\">\n      </div>\n\n      <div class=\"row\"> \n        <div class=\"col-sm\">\n          <button type=\"button\" id=\"createRoom\" class=\"btn btn-primary btn-sm enterRoomPush\" @click=\"enterRoom\">进入房间（推流）</button>\n          <button type=\"button\" id=\"openRoom\" class=\"btn btn-primary btn-sm enterRoomPlay\">进入房间（不推流）</button>\n          <button type=\"button\" id=\"leaveRoom\" class=\"btn btn-secondary btn-sm leaveRoom\">退出</button>\n        </div>\n      </div>\n      \n      <div id=\"view\"></div>\n      \n      <div class=\"row videoRow\">\n        <div class=\"col-sm\" >\n          <label id=\"previewLabel\"></label>\n          <audio id=\"previewVideo\" autoplay muted playsinline ></audio>\n          <el-tag>老师 </el-tag>\n          <input type=\"button\" id=\"btn1\" value=\"打开麦克风\" @click=\"openSay\"/>\n          <input type=\"button\" id=\"btn2\" value=\"关闭麦克风\" @click=\"closeSay\"/>\n          <input type=\"button\" id=\"btn3\"  value=\"打开听筒\" @click=\"openListen\" />\n          <input type=\"button\" id=\"btn4\" value=\"关闭听筒\" @click=\"closeListen\" />\n        </div>\n        <div class=\"col-sm remoteVideo\">\n          <!--<video  autoplay muted playsinline></video>-->\n        </div>\n      </div>\n      <div id=\"view2\" style=\"margin-top: 20px;\"></div>\n    </div>\n         \n    </el-main>\n</el-container>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex'\nimport { checkAnRun, enterRoom, publish, zg, useLocalStreamList, logout } from './common';\n\nexport default {\n     created() {\n    this.$store.dispatch('sendUserEnter')\n    \n    $(async () => {\n    await checkAnRun();\n    zg.off('roomStreamUpdate');\n    zg.on('roomStreamUpdate', async (roomID, updateType, streamList, extendedData) => {\n        // console.log('roomStreamUpdate roomID ', roomID, streamList, extendedData);\n        if (updateType == 'ADD') {\n            for (let i = 0; i < streamList.length; i++) {\n                // console.info(streamList[i].streamID + ' was added');\n                let remoteStream;\n\n                try {\n                    remoteStream = await zg.startPlayingStream(streamList[i].streamID, {\n                        video: false,\n                    });\n                    useLocalStreamList.push(streamList[i]);\n\n                    $('.remoteVideo').append($(`<audio id=${streamList[i].streamID} autoplay muted playsinline ></audio>`));\n                    const audio = $('.remoteVideo audio:last')[0];\n                    // console.warn('audio', audio, remoteStream);\n                    audio.srcObject = remoteStream;\n                    audio.muted = false;\n                    var MyDiv =document.getElementById(\"view2\");\n                    // alert(MyDiv);\n                    let name = [\"学生\",\"打开麦克风\",\"关闭麦克风\",\"打开听筒\",\"关闭听筒\"]\n                    for (let i = 0; i < 5; i++) {\n                        var button = document.createElement(\"input\");\n                        button.setAttribute(\"type\", \"button\");\n                        button.setAttribute(\"value\", name[i] );\n                        button.setAttribute(\"id\", \"btn\" + i);\n                        button.style.width = \"120px\";\n                        // button.setAttribute(\"onclick\", \"function(this.id)\");\n                        MyDiv.appendChild(button);\n                    }\n                } catch (error) {\n                    // console.error(error);\n                    continue;\n                }\n\n            }\n        } else if (updateType == 'DELETE') {\n            for (let k = 0; k < useLocalStreamList.length; k++) {\n                for (let j = 0; j < streamList.length; j++) {\n                    if (useLocalStreamList[k].streamID === streamList[j].streamID) {\n                        try {\n                            zg.stopPlayingStream(useLocalStreamList[k].streamID);\n                        } catch (error) {\n                            console.error(error);\n                        }\n\n                        // console.info(useLocalStreamList[k].streamID + 'was devared');\n\n\n                        $('.remoteVideo audio:eq(' + k + ')').remove();\n                        useLocalStreamList.splice(k--, 1);\n\n                        break;\n                    }\n                }\n            }\n        }\n    });\n\n    \n});\n\n\n  },\ncomputed: {\n},\nmounted(){\n    \n},\ndata(){\n    return{\n        \n    }\n},\nmethods: {\n    async enterRoom(){\n        let loginSuc = false;\n        try {\n            loginSuc = await enterRoom();\n            loginSuc && (await publish({ camera: { video: false } }));\n        } catch (error) {\n            console.error(error);\n        }\n    },\n\n    async openSay(){\n        logout()\n        let loginSuc = false;\n        try {\n            loginSuc = await enterRoom();\n            loginSuc && (await publish());\n        } catch (error) {\n            console.error(error);\n        }\n    },\n    async closeSay(){\n        logout()\n        enterRoom()\n    },\n    openListen(){\n        var myAuto = document.getElementById('previewVideo');\n        myAuto.play();\n    },\n    closeListen(){\n        var myAuto = document.getElementById('previewVideo');\n        myAuto.pause();\n    },\n}\n\n}\n</script>\n<style lang = \"less\" scoped>\n.el-container{\n    width: 100%;\n    height: 100%;\n    background-color: aqua;\n\n    .el-header{\n        line-height: 60px;\n    }\n\n    .el-main{\n        background-color: aquamarine;\n        overflow: hidden;\n         \n        .bg-f2{\n          background-color: #f8f9fa;\n        }\n        video{\n            width: 320px;\n            height: auto;\n        }\n        .videoRow{\n            margin-top: 30px;\n        }\n        #previewLabel{\n            display: block;\n        }\n            \n        \n    }\n}\n.el-card{\n    width: 100%;\n    height: 100%;\n}\n</style>"]}]}
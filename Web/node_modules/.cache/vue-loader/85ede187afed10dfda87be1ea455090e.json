{"remainingRequest":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/src/views/Game/components/app-stage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/src/views/Game/components/app-stage.vue","mtime":1629449465299},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCcKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQoKXsKICAKICB9LAogIGJlZm9yZU1vdW50KCl7CiAgICAKICB9LAogIG1vdW50ZWQoKXsKICAgIHRoaXMuZ2V0WGIgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmQnKS5jbGllbnRXaWR0aAogICAgY29uc29sZS5sb2coIuW9k+WJjeeUu+adv+eahOWuveaYryIgKyB0aGlzLmdldFhiKTsKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubm93WCk7CiAgICAvLyB0aGlzLnN0YWdlQ29uZmlnLndpZHRoID0gdGhpcy4kcmVmcy53cmFwcGVyLiRlbC5vZmZzZXRXaWR0aAogICAgLy8gdGhpcy53aWR0aCA9IHRoaXMuJHJlZnMud3JhcHBlci4kZWwub2Zmc2V0V2lkdGgKICAgIAogICAgY29uc3QgdGhhdCA9IHRoaXMKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBmdW5jdGlvbigpe30sIHsgcGFzc2l2ZTogZmFsc2UgfSkKICAgCiAgICAgIAogICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215Q2FudmFzJykKICAgICAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpCiAgICAgICAgLy8gdGhpcy5jb250ZXh0LnRyYW5zbGF0ZSh0aGlzLm9mZnNldFgsIHRoaXMub2Zmc2V0WSk7CgogICAgICAgIC8q5bu656uL5o+S5Lu26YCa5L+h44CB5re75Yqg5ZON5bqU5Ye95pWwKi8KICAgICAgICAgICAgdGhhdC5wb3J0ID0gY2hyb21lLnJ1bnRpbWUuY29ubmVjdCh0aGF0LmVkaXRvckV4dGVuc2lvbklkKTsKICAgICAgICAgICAgdGhhdC5wb3J0Lm9uTWVzc2FnZS5hZGRMaXN0ZW5lciggZnVuY3Rpb24obXNnKXsKICAgICAgICAgICAgICAgIHRoYXQucmVjTWVzc2FnZShtc2cpCiAgICAgICAgICAgIH0pCgogICAgICAgICAgICB0aGF0LmluaXRDYW52YXModGhhdC5waWQpCiAgICAgICAgICAgCiAgICAgIAogICAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGluZXNJbmRleDowLAogICAgICBsaW5lSW5kZXg6MCwKICAgICAgICAvLyDnlLvluIPphY3nva4KICAgICAgICBzdGFnZUNvbmZpZzogewogICAgICAgICAgICB3aWR0aDogNzg5LjQzLAogICAgICAgICAgICBoZWlnaHQ6IDQ1MAogICAgICAgIH0sCiAgICAgICAgLy8g57uY55S754q25oCBCiAgICAgICAgcGFpbnRpbmc6IGZhbHNlLAogICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLAogICAgICAgIHN0cm9rZVdpZHRoOiAxLAogICAgICAgIHZpZDoxMTU1LAogICAgICAgIC8vIHBpZDoyNDY3MiwgLy9UOFkKICAgICAgICBwaWQ6MjQ2NzEsLy9KN00KICAgICAgICBwYWdlWSA6IDgxNzAsIC8vIOiuvuWkh+WDj+e0oFnovbTmnIDlpKflgLwKICAgICAgICBwYWdlWCA6IDE0MzM1LCAvLyDorr7lpIflg4/ntKBY6L205pyA5aSn5YC8CiAgICAgICAgcG9ydDoiIiwgICAgICAgICAgIC8vIOmAmuS/oeWvueixoQogICAgICAgIGVkaXRvckV4dGVuc2lvbklkOidkamtraGNubHBscGNoZmJkZ2tkZ2djbWxjbGdnZWZiZycsICAvLyDpgJrkv6FJRAoKICAgICAgICB3aWR0aCA6IDc4OS40MywKICAgICAgICBoZWlnaHQgOiA0NTAsCiAgICAgICAgb2Zmc2V0WCA6IDAuNSwKICAgICAgICBvZmZzZXRZIDogMC41LAogICAgICAgIHJhdGlvWCA6IDEsIAogICAgICAgIHJhdGlvWSA6IDEsCiAgICAgICAgeDE6MiwgeTE6MiwgeDI6MiwgeTI6MiwgcmVzIDogMiwKICAgICAgICBjYW52YXMgOiAiIiwKICAgICAgICBjb250ZXh0IDogIiIsCiAgICAgICAgaXNTdGFydCA6IDAsCiAgICAgICAgbm93WDoxLAogICAgICAgIGdldFhiOjEsCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoWydsaW5lcyddKSwKICAgICAgZnVuKCl7CiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMKICAgICAgICBmb3IgKHRoaXMubGluZXNJbmRleDsgdGhpcy5saW5lc0luZGV4IDwgdGhpcy4kc3RvcmUuc3RhdGUubGluZXMubGVuZ3RoOyB0aGlzLmxpbmVzSW5kZXgrKykgewogICAgICAgICAgY29uc29sZS5sb2codGhpcy4kc3RvcmUuc3RhdGUubGluZXNbdGhpcy5saW5lc0luZGV4XSk7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS5saW5lc1t0aGlzLmxpbmVzSW5kZXhdLnBvaW50cyk7CiAgICAgICAgICAvLyBhbGVydCgKICAgICAgICAgICAgLy8gdGhpcy4kc3RvcmUuc3RhdGUubGluZXNbdGhpcy5saW5lc0luZGV4XS5wb2ludHNbMF0gKj0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkJykuY2xpZW50V2lkdGgKICAgICAgICAgIC8vICkKICAgICAgICAgIC8vIGZvciAodGhhdC5saW5lSW5kZXggPSAwOyB0aGF0LmxpbmVJbmRleCA8IHRoaXMuJHN0b3JlLnN0YXRlLmxpbmVzW3RoaXMubGluZXNJbmRleF0ucG9pbnRzLmxlbmd0aDsgdGhhdC5saW5lSW5kZXgrPTIpIHsKICAgICAgICAgIC8vICAgY29uc29sZS5sb2coMTExICsgIisiICsgdGhhdC4kc3RvcmUuc3RhdGUubGluZXNbdGhhdC5saW5lc0luZGV4XS5wb2ludHNbdGhhdC5saW5lSW5kZXhdKTsKICAgICAgICAgIC8vICAgY29uc29sZS5sb2coMTIzKTsKICAgICAgICAgIC8vIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmxpbmVzCiAgICAgIH0sCiAgICAuLi5tYXBHZXR0ZXJzKFsnaXNHYW1lU3RhcnRlZCcsICdpc0dhbWVIb2xkZXInXSksCiAgfSwKCiAKICBtZXRob2RzOiB7CiAgICAvLyDpvKDmoIfmjInkuIsKICAgIG1vdXNlZG93bkhhbmRsZXIoZSkgewogICAgICBpZiAoIXRoaXMuaXNHYW1lSG9sZGVyIHx8ICF0aGlzLmlzR2FtZUhvbGRlcikgcmV0dXJuCgogICAgICB0aGlzLnBhaW50aW5nID0gdHJ1ZQogICAgICAvLyDliJvlu7rkuIDkuKrmlrDnur/mnaEKICAgICAgY29uc3QgbmV3TGluZSA9IHsKICAgICAgICBzdHJva2U6IHRoaXMuc3Ryb2tlLAogICAgICAgIHN0cm9rZVdpZHRoOiB0aGlzLnN0cm9rZVdpZHRoLAogICAgICAgIHBvaW50czogW2UuZXZ0LmxheWVyWCwgZS5ldnQubGF5ZXJZXQogICAgICB9CiAgICAgIC8vIOacrOWcsOeUu+e6vywg5a2Y5YiwdnVleOS4rQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RyYXdOZXdMaW5lJywgbmV3TGluZSkKICAgICAgLy8g6K+35rGC5pyN5Yqh5ZmoCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZW5kRHJhd05ld0xpbmUnLCBuZXdMaW5lKQogICAgICAKICAgIH0sCgogICAgLy8g6byg5qCH5ouW5YqoCiAgICBtb3VzZW1vdmVIYW5kbGVyKGUpIHsKICAgICAgaWYgKCF0aGlzLnBhaW50aW5nKSByZXR1cm4KICAgICAgY29uc3QgbGFzdExpbmUgPSB0aGlzLmxpbmVzW3RoaXMubGluZXMubGVuZ3RoIC0gMV0KICAgICAgbGFzdExpbmUucG9pbnRzID0gbGFzdExpbmUucG9pbnRzLmNvbmNhdChbZS5ldnQubGF5ZXJYLCBlLmV2dC5sYXllclldKQogICAgICAvLyBjb25zb2xlLmxvZyhsYXN0TGluZSkKICAgICAKICAgICAgCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlTmV3TGluZScsIGxhc3RMaW5lKQogICAgICAvLyDor7fmsYLmnI3liqHlmagKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlbmRVcGRhdGVOZXdMaW5lJywgbGFzdExpbmUpCiAgICB9LAoKICAgIC8vIOm8oOagh+mHiuaUvgogICAgbW91c2V1cEhhbmRsZXIoKSB7CiAgICAgIHRoaXMucGFpbnRpbmcgPSBmYWxzZQogICAgfSwKICAgIC8vIOeslOaMieS4iwogICAgdG91Y2hzdGFydEhhbmRsZXIoZSkgewogICAgICBpZiAoIXRoaXMuaXNHYW1lSG9sZGVyIHx8ICF0aGlzLmlzR2FtZUhvbGRlcikgcmV0dXJuCiAgICAgIHRoaXMucGFpbnRpbmcgPSB0cnVlCiAgICAgIHRoaXMubm93WCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkJykuY2xpZW50V2lkdGgKICAgICAgbGV0IG5ld1ggPSBlLmV2dC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYLSQoJyNjYXJkJykub2Zmc2V0KCkubGVmdAogICAgICBsZXQgbmV3WSA9IGUuZXZ0LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFktJCgnI2NhcmQnKS5vZmZzZXQoKS50b3ArICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpCiAgICAgIC8vIOWIm+W7uuS4gOS4quaWsOe6v+adoQogICAgICBjb25zdCBuZXdMaW5lID0gewogICAgICAgIHN0cm9rZTogdGhpcy5zdHJva2UsCiAgICAgICAgc3Ryb2tlV2lkdGg6IHRoaXMuc3Ryb2tlV2lkdGgsCiAgICAgICAgcG9pbnRzOiBbbmV3WCwgbmV3WV0KICAgICAgfQogICAgICAvLyDmnKzlnLDnlLvnur8sIOWtmOWIsHZ1ZXjkuK0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkcmF3TmV3TGluZScsIG5ld0xpbmUpCiAgICAgIC8vIOivt+axguacjeWKoeWZqAogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VuZERyYXdOZXdMaW5lJywgbmV3TGluZSkKICAgICB9LAogIAogICAgLy8g56yU5ouW5YqoCiAgICB0b3VjaG1vdmVIYW5kbGVyKGUpIHsKICAgICAgaWYgKCF0aGlzLnBhaW50aW5nKSByZXR1cm4KICAgICAgdGhpcy5ub3dYID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmQnKS5jbGllbnRXaWR0aAogICAgICBjb25zdCBsYXN0TGluZSA9IHRoaXMubGluZXNbdGhpcy5saW5lcy5sZW5ndGggLSAxXQogICAgICBsZXQgbmV3WCA9IGUuZXZ0LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgtJCgnI2NhcmQnKS5vZmZzZXQoKS5sZWZ0CiAgICAgIGxldCBuZXdZID0gZS5ldnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WS0kKCcjY2FyZCcpLm9mZnNldCgpLnRvcCsgJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkKICAgICAgCiAgICAgIGxhc3RMaW5lLnBvaW50cyA9IGxhc3RMaW5lLnBvaW50cy5jb25jYXQoW25ld1gsIG5ld1ldKQogICAgICAvLyBjb25zb2xlLmxvZyhsYXN0TGluZSkKICAgICAgLy8gIGFsZXJ0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkJykuY2xpZW50V2lkdGgpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZU5ld0xpbmUnLCBsYXN0TGluZSkKICAgICAgLy8g6K+35rGC5pyN5Yqh5ZmoCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZW5kVXBkYXRlTmV3TGluZScsIGxhc3RMaW5lKQogICAgfSwKCiAgICAvLyDnrJTph4rmlL4KICAgIHRvdWNoZW5kSGFuZGxlcigpIHsKICAgICAgdGhpcy5wYWludGluZyA9IGZhbHNlCiAgICB9LAogICAgaW5pdENhbnZhcyhwaWQpIHsKICAgICAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMKICAgICAgICAgICAgaWYgKHBpZCA9PSAyNDY3MiB8fCBwaWQgPT0gMjQ2ODIpIHsKICAgICAgICAgICAgICAgIC8vIFQ4WSDvvZzvvZwgVDhDCiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VZID0gMjEwMDAKICAgICAgICAgICAgICAgIHRoaXMucGFnZVggPSAyOTcwMAogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHRoaXMuaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpID4gdGhpcy5oZWlnaHQgPyB0aGlzLmhlaWdodCA6ICQod2luZG93KS5oZWlnaHQoKSAtIDIwOwogICAgICAgICAgICAvLyB0aGlzLndpZHRoID0gcGFyc2VJbnQodGhpcy5oZWlnaHQgKiB0aGlzLnBhZ2VYIC8gdGhpcy5wYWdlWSk7CiAgICAgICAgICAgIC8vIGlmKHRoaXMud2lkdGggPiAkKHdpbmRvdykud2lkdGgoKSAqIDAuNjgpewogICAgICAgICAgICAvLyAgICAgdGhpcy53aWR0aCA9IHBhcnNlSW50KCQod2luZG93KS53aWR0aCgpICogMC42OCk7CiAgICAgICAgICAgIC8vICAgICB0aGlzLmhlaWdodCA9IHBhcnNlSW50KHRoaXMud2lkdGggKiB0aGlzLnBhZ2VZIC8gdGhpcy5wYWdlWCk7CiAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIHRoaXMucmF0aW9YID0gdGhpcy53aWR0aCAvIHRoaXMucGFnZVg7CiAgICAgICAgICAgIHRoaXMucmF0aW9ZID0gdGhpcy5oZWlnaHQgLyB0aGlzLnBhZ2VZOwogICAgICAgICAgICAkKHRoYXQuY2FudmFzKS5hdHRyKCJ3aWR0aCIsIHRoYXQud2lkdGgpOwogICAgICAgICAgICAkKHRoYXQuY2FudmFzKS5hdHRyKCJoZWlnaHQiLCB0aGF0LmhlaWdodCk7CiAgICAgICAgICAgIHRoaXMucGVuSW5pdCgpCiAgICAgICAgfSwKICAgICAgICByZWNNZXNzYWdlKG1zZykgewogICAgICAgICAgICBzd2l0Y2ggKG1zZy5zdGF0dXMpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAkKCcjaGVoZScpLmh0bWwoJ+iuvuWkh+i/nuaOpeaIkOWKnycpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIHRoaXMubGluZVRvKG1zZy54LCBtc2cueSwgbXNnLnMsIG1zZy5wKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAkKCcjaGVoZScpLmh0bWwoJ3VzYuaTjeS9nOadg+mZkOiOt+WPluWksei0pScpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICQoJyNoZWhlJykuaHRtbCgn5oyH5a6a55qEdXNi6K6+5aSH5pyq5om+5YiwJyk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgJCgnI2hlaGUnKS5odG1sKCd1c2Lorr7lpIfov57mjqXlpLHotKXlj4rmiZPlvIDorr7lpIflpLHotKUnKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgNTogCiAgICAgICAgICAgICAgICAgICAgJCgnI2hlaGUnKS5odG1sKCflrZjlnKjmiZPlvIDnmoTorr7lpIcnKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICBpZiAobXNnLm1vZGUgPT0gJ21vdXNlJykgewogICAgICAgICAgICAgICAgICAgICAgICAkKCcjaGVoZScpLmh0bWwoJ+W9k+WJjeaooeW8j+S4uum8oOagh+aooeW8jycpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmIChtc2cubW9kZSA9PSAncGVuJykgewogICAgICAgICAgICAgICAgICAgICAgICAkKCcjaGVoZScpLmh0bWwoJ+W9k+WJjeaooeW8j+S4uueslOaooeW8jycpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICAgICAgJCgnI2hlaGUnKS5odG1sKG1zZy5kb25nbGVfc3RhdHVzKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICAgICAgJCgnI0JMRURldmljZXMnKS5hcHBlbmQoIjxsaT4iK21zZy5kZXZpY2VfbmFtZSsiPGJ1dHRvbiAgb25jbGljaz0nY29ubmVjdEJMRSgiK21zZy5udW0rIiknPui/nuaOpTwvYnV0dG9uPjwvbGk+Iik7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoJ+W3pumUruWNleWHuycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydCgn5bem6ZSu5Y+M5Ye7JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCflt6bplK7plb/mjIknKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoJ+WPs+mUruWNleWHuycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydCgn5Y+z6ZSu5Y+M5Ye7JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCflj7PplK7plb/mjIknKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDEwMDoKICAgICAgICAgICAgICAgICAgICBsZXQgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteUNhbnZhcycpOwogICAgICAgICAgICAgICAgICAgIGMuaGVpZ2h0ID0gYy5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHBlbkluaXQoKXsKICAgICAgICAgICAgdGhpcy5jbG9zZVVTQigpCiAgICAgICAgfSwKICAgICAgICAvL+aJk+W8gFVTQuiuvuWkhwogICAgICAgIG9wZW5VU0IoKXsKICAgICAgICAgICAgbGV0IFZJRCA9IHRoaXMudmlkOwogICAgICAgICAgICBsZXQgUElEID0gdGhpcy5waWQ7CiAgICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZSh7Y21kOidvcGVuVVNCJyxwaWQ6IFBJRCx2aWQ6IFZJRH0pOwogICAgICAgICAgICB0aGlzLmNoYW5nZU1vZGUoKQogICAgICAgIH0sCiAgICAgICAgLy/lhbPpl61VU0Lorr7lpIcKICAgICAgICBjbG9zZVVTQigpewogICAgICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2Uoe2NtZDonY2xvc2VVU0InfSk7CiAgICAgICAgICAgIAogICAgICAgIH0sCiAgICAgICAgLy/ojrflj5Zkb25nbGXnirbmgIEKICAgICAgICBnZXREb25nbGVTdGF0dXMoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKDEyMyk7CiAgICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZSh7Y21kOidkb25nbGVTdGF0dXMnfSk7CiAgICAgICAgfSwKICAgICAgICAvL+aJq+aPj+iTneeJmQogICAgICAgIHNjYW5CTEUoKXsKICAgICAgICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHtjbWQ6J3NjYW5CTEUnfSk7CiAgICAgICAgfSwKICAgICAgICAvL+i/nuaOpeiTneeJmeiuvuWkhwogICAgICAgIGNvbm5lY3RCTEUobnVtKSB7CiAgICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZSh7Y21kOidjb25uZWN0QkxFJyxudW06IG51bX0pOwogICAgICAgIH0sCiAgICAgICAgLy/mlq3lvIDok53niZkKICAgICAgICBkaXNjb25uZWN0QkxFKCkgewogICAgICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2Uoe2NtZDonY2xvc2VCTEUnfSk7CiAgICAgICAgfSwKICAgICAgICAvLyDliIfmjaLnrJTmqKHlvI8KICAgICAgICBjaGFuZ2VNb2RlKCkgewogICAgICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2Uoe2NtZDonY2hhbmdlTW9kZSd9KTsKICAgICAgICB9LAogICAgICAgIC8vIGNsZWFyIGNhbnZhcwogICAgICAgIGNsZWFyQ2FudmFzKCl7CiAgICAgICAgICAgIGxldCBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215Q2FudmFzJyk7CiAgICAgICAgICAgIGMuaGVpZ2h0ID0gYy5oZWlnaHQ7CiAgICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZSh7Y21kOidjbGVhckNhbnZhcyd9KTsKICAgICAgICB9LAoKICAgICAgICBsaW5lVG8oeCwgeSwgcywgcCl7CiAgICAgICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzCiAgICAgICAgICAgIGxldCB0eCA9IHRoaXMucmF0aW9YICogeDsKICAgICAgICAgICAgbGV0IHR5ID0gdGhpcy5yYXRpb1kgKiB5OwogICAgICAgICAgICBsZXQgdHcgPSAxLjE7CiAgICAgICAgICAgIGxldCBjb24gPSAneD0nK3grJyx5PScreSsnLHM9JytzKycscD0nK3A7CiAgICAgICAgICAgICQoJyNjb250ZW50JykudGV4dChjb24pOwogICAgICAgICAgICBpZiAocyA9PSAxNiB8fCBzID09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuaXNTdGFydCA9IDA7CiAgICAgICAgICAgICAgICB0aGF0LnBhaW50aW5nID0gZmFsc2UKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0aGlzLmlzU3RhcnQgPiAwKXsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdGhpcy54MiA9IE1hdGguZmxvb3IodGhpcy5yYXRpb1ggKiB4KTsKICAgICAgICAgICAgICAgIHRoaXMueTIgPSBNYXRoLmZsb29yKHRoaXMucmF0aW9ZICogeSk7CiAgICAgICAgICAgICAgICBsZXQgZCA9IE1hdGguc3FydChNYXRoLnBvdyh0aGlzLngxIC0gdGhpcy54MiwgMikgKyBNYXRoLnBvdyh0aGlzLnkxIC0gdGhpcy55MiwgMikpOwogICAgICAgICAgICAgICAgaWYoZCA+IHRoaXMucmVzKXsKICAgICAgICAgICAgICAgICAgICB0eCA9IE1hdGgucm91bmQoKHRoaXMueDEgKyB0aGlzLngyKSAvIDIgKiAxMDApIC8gMTAwOwogICAgICAgICAgICAgICAgICAgIHR5ID0gTWF0aC5yb3VuZCgodGhpcy55MSArIHRoaXMueTIpIC8gMiAqIDEwMCkgLyAxMDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTdGFydCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8odGhpcy54MSwgdGhpcy55MSwgdHgsIHR5KTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmxpbmVXaWR0aCA9IHR3OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0Lm1vdmVUbyh0eCx0eSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RMaW5lID0gdGhhdC5saW5lc1t0aGF0LmxpbmVzLmxlbmd0aCAtIDFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TGluZS5wb2ludHMgPSBsYXN0TGluZS5wb2ludHMuY29uY2F0KFt0aGlzLngxLCB0aGlzLnkxXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxhc3RMaW5lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kc3RvcmUuY29tbWl0KCd1cGRhdGVOZXdMaW5lJywgbGFzdExpbmUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDor7fmsYLmnI3liqHlmagKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuJHN0b3JlLmRpc3BhdGNoKCdzZW5kVXBkYXRlTmV3TGluZScsIGxhc3RMaW5lKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codHggKyAiICIgKyB0eSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMueDEgPSB0aGlzLngyOwogICAgICAgICAgICAgICAgICAgIHRoaXMueTEgPSB0aGlzLnkyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5pc1N0YXJ0Kys7CiAgICAgICAgICAgICAgICB0aGF0LnBhaW50aW5nID0gdHJ1ZQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIC8qIOWIneWni+WMlueUu+eCuSovCiAgICAgICAgICAgICAgICB0aGlzLmlzU3RhcnQgPSAxOwogICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmxpbmVDYXAgPSAicm91bmQiOwogICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZVN0eWxlID0gIiMwMDAiOy8v5paw5aKeCiAgICAgICAgICAgICAgICB0aGlzLngxID0gdHg7CiAgICAgICAgICAgICAgICB0aGlzLnkxID0gdHk7CiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQubW92ZVRvKHR4LCB0eSk7Ly/otbfngrkKICAgICAgICAgICAgICAgIHRoaXMuaXNTdGFydCsrOwogICAgICAgICAgICAgICAgdGhhdC5wYWludGluZyA9IHRydWUKICAgICAgICAgICAgICAgIC8vIOWIm+W7uuS4gOS4quaWsOe6v+adoQogICAgICAgICAgICAgICAgY29uc3QgbmV3TGluZSA9IHsKICAgICAgICAgICAgICAgICAgICBzdHJva2U6IHRoaXMuc3Ryb2tlLAogICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiB0aGlzLnN0cm9rZVdpZHRoLAogICAgICAgICAgICAgICAgICAgIHBvaW50czogW3RoaXMueDEsIHRoaXMueTFdCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyDmnKzlnLDnlLvnur8sIOWtmOWIsHZ1ZXjkuK0KICAgICAgICAgICAgICAgIHRoYXQuJHN0b3JlLmNvbW1pdCgnZHJhd05ld0xpbmUnLCBuZXdMaW5lKQogICAgICAgICAgICAgICAgLy8g6K+35rGC5pyN5Yqh5ZmoCiAgICAgICAgICAgICAgICB0aGF0LiRzdG9yZS5kaXNwYXRjaCgnc2VuZERyYXdOZXdMaW5lJywgbmV3TGluZSkKICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8odHgsIHR5KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAKICB9Cn0K"},{"version":3,"sources":["app-stage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"app-stage.vue","sourceRoot":"src/views/Game/components","sourcesContent":["<template>\n<div>\n  <div class=\"message\">\n    <span id=\"hehe\"></span>\n    <p  id=\"content\"></p>\n    <span id=\"d\"></span>\n    <ul id=\"BLEDevices\"></ul>\n    </div>\n  <input type=\"button\" value=\"打开USB设备\"  @click=\"openUSB\"/>\n    <input type=\"button\" value=\"切换模式\" @click=\"changeMode\"/>\n    画布的宽:{{getXb}}\n  <el-card ref=\"wrapper\" :body-style=\"{ padding: 0 }\" id=\"card\">\n    <v-stage\n      id=\"stage\"\n      :config=\"stageConfig\"\n      @mousedown=\"mousedownHandler\"\n      @mouseup=\"mouseupHandler\"\n      @mousemove=\"mousemoveHandler\"\n      @touchstart=\"touchstartHandler\"\n      @touchmove=\"touchmoveHandler\"\n      @touchend=\"touchendHandler\"\n    >\n      <v-layer>\n        <v-line\n          v-for=\"(line, index) in lines\"\n          :key=\"index\"\n          :config=\"line\"\n        />\n      </v-layer>\n    </v-stage>\n<canvas  v-show=\"false\" id=\"myCanvas\" class=\"board\" width=\"1228\" height=\"960\" style=\"border:1px solid black;\">\n   \n</canvas>\n  </el-card>\n\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex'\nexport default {\n  created(){\n  \n  },\n  beforeMount(){\n    \n  },\n  mounted(){\n    this.getXb =  document.getElementById('card').clientWidth\n    console.log(\"当前画板的宽是\" + this.getXb);\n    // console.log(this.nowX);\n    // this.stageConfig.width = this.$refs.wrapper.$el.offsetWidth\n    // this.width = this.$refs.wrapper.$el.offsetWidth\n    \n    const that = this\n    window.addEventListener('touchmove', function(){}, { passive: false })\n   \n      \n        this.canvas = document.getElementById('myCanvas')\n        this.context = this.canvas.getContext('2d')\n        // this.context.translate(this.offsetX, this.offsetY);\n\n        /*建立插件通信、添加响应函数*/\n            that.port = chrome.runtime.connect(that.editorExtensionId);\n            that.port.onMessage.addListener( function(msg){\n                that.recMessage(msg)\n            })\n\n            that.initCanvas(that.pid)\n           \n      \n    },\n  data() {\n    return {\n      linesIndex:0,\n      lineIndex:0,\n        // 画布配置\n        stageConfig: {\n            width: 789.43,\n            height: 450\n        },\n        // 绘画状态\n        painting: false,\n        stroke: '#000000',\n        strokeWidth: 1,\n        vid:1155,\n        // pid:24672, //T8Y\n        pid:24671,//J7M\n        pageY : 8170, // 设备像素Y轴最大值\n        pageX : 14335, // 设备像素X轴最大值\n        port:\"\",           // 通信对象\n        editorExtensionId:'djkkhcnlplpchfbdgkdggcmlclggefbg',  // 通信ID\n\n        width : 789.43,\n        height : 450,\n        offsetX : 0.5,\n        offsetY : 0.5,\n        ratioX : 1, \n        ratioY : 1,\n        x1:2, y1:2, x2:2, y2:2, res : 2,\n        canvas : \"\",\n        context : \"\",\n        isStart : 0,\n        nowX:1,\n        getXb:1,\n    }\n  },\n  computed: {\n    ...mapState(['lines']),\n      fun(){\n        const that = this\n        for (this.linesIndex; this.linesIndex < this.$store.state.lines.length; this.linesIndex++) {\n          console.log(this.$store.state.lines[this.linesIndex]);\n          console.log(this.$store.state.lines[this.linesIndex].points);\n          // alert(\n            // this.$store.state.lines[this.linesIndex].points[0] *=  document.getElementById('card').clientWidth\n          // )\n          // for (that.lineIndex = 0; that.lineIndex < this.$store.state.lines[this.linesIndex].points.length; that.lineIndex+=2) {\n          //   console.log(111 + \"+\" + that.$store.state.lines[that.linesIndex].points[that.lineIndex]);\n          //   console.log(123);\n          // }\n        }\n        return this.$store.state.lines\n      },\n    ...mapGetters(['isGameStarted', 'isGameHolder']),\n  },\n\n \n  methods: {\n    // 鼠标按下\n    mousedownHandler(e) {\n      if (!this.isGameHolder || !this.isGameHolder) return\n\n      this.painting = true\n      // 创建一个新线条\n      const newLine = {\n        stroke: this.stroke,\n        strokeWidth: this.strokeWidth,\n        points: [e.evt.layerX, e.evt.layerY]\n      }\n      // 本地画线, 存到vuex中\n      this.$store.commit('drawNewLine', newLine)\n      // 请求服务器\n      this.$store.dispatch('sendDrawNewLine', newLine)\n      \n    },\n\n    // 鼠标拖动\n    mousemoveHandler(e) {\n      if (!this.painting) return\n      const lastLine = this.lines[this.lines.length - 1]\n      lastLine.points = lastLine.points.concat([e.evt.layerX, e.evt.layerY])\n      // console.log(lastLine)\n     \n      \n      this.$store.commit('updateNewLine', lastLine)\n      // 请求服务器\n      this.$store.dispatch('sendUpdateNewLine', lastLine)\n    },\n\n    // 鼠标释放\n    mouseupHandler() {\n      this.painting = false\n    },\n    // 笔按下\n    touchstartHandler(e) {\n      if (!this.isGameHolder || !this.isGameHolder) return\n      this.painting = true\n      this.nowX = document.getElementById('card').clientWidth\n      let newX = e.evt.changedTouches[0].clientX-$('#card').offset().left\n      let newY = e.evt.changedTouches[0].clientY-$('#card').offset().top+ $(document).scrollTop()\n      // 创建一个新线条\n      const newLine = {\n        stroke: this.stroke,\n        strokeWidth: this.strokeWidth,\n        points: [newX, newY]\n      }\n      // 本地画线, 存到vuex中\n      this.$store.commit('drawNewLine', newLine)\n      // 请求服务器\n      this.$store.dispatch('sendDrawNewLine', newLine)\n     },\n  \n    // 笔拖动\n    touchmoveHandler(e) {\n      if (!this.painting) return\n      this.nowX = document.getElementById('card').clientWidth\n      const lastLine = this.lines[this.lines.length - 1]\n      let newX = e.evt.changedTouches[0].clientX-$('#card').offset().left\n      let newY = e.evt.changedTouches[0].clientY-$('#card').offset().top+ $(document).scrollTop()\n      \n      lastLine.points = lastLine.points.concat([newX, newY])\n      // console.log(lastLine)\n      //  alert(document.getElementById('card').clientWidth);\n      this.$store.commit('updateNewLine', lastLine)\n      // 请求服务器\n      this.$store.dispatch('sendUpdateNewLine', lastLine)\n    },\n\n    // 笔释放\n    touchendHandler() {\n      this.painting = false\n    },\n    initCanvas(pid) {\n            const that = this\n            if (pid == 24672 || pid == 24682) {\n                // T8Y ｜｜ T8C\n                this.pageY = 21000\n                this.pageX = 29700\n            }\n            // this.height = $(window).height() > this.height ? this.height : $(window).height() - 20;\n            // this.width = parseInt(this.height * this.pageX / this.pageY);\n            // if(this.width > $(window).width() * 0.68){\n            //     this.width = parseInt($(window).width() * 0.68);\n            //     this.height = parseInt(this.width * this.pageY / this.pageX);\n            // }\n            \n            this.ratioX = this.width / this.pageX;\n            this.ratioY = this.height / this.pageY;\n            $(that.canvas).attr(\"width\", that.width);\n            $(that.canvas).attr(\"height\", that.height);\n            this.penInit()\n        },\n        recMessage(msg) {\n            switch (msg.status) {\n                case 0:\n                    $('#hehe').html('设备连接成功');\n                    break;\n                case 1:\n                    this.lineTo(msg.x, msg.y, msg.s, msg.p);\n                    break;\n                case 2:\n                    $('#hehe').html('usb操作权限获取失败');\n                    break;\n                case 3:\n                    $('#hehe').html('指定的usb设备未找到');\n                    break;\n                case 4:\n                    $('#hehe').html('usb设备连接失败及打开设备失败');\n                    break;\n                case 5: \n                    $('#hehe').html('存在打开的设备');\n                    break;\n                case 6:\n                    if (msg.mode == 'mouse') {\n                        $('#hehe').html('当前模式为鼠标模式');\n                    }else if (msg.mode == 'pen') {\n                        $('#hehe').html('当前模式为笔模式');\n                    }\n                    break;\n                case 20:\n                    $('#hehe').html(msg.dongle_status);\n                    break;\n                case 21:\n                    $('#BLEDevices').append(\"<li>\"+msg.device_name+\"<button  onclick='connectBLE(\"+msg.num+\")'>连接</button></li>\");\n                    break;\n                        case 32:\n                            window.alert('左键单击')\n                            break;\n                        case 33:\n                            window.alert('左键双击')\n                            break;\n                        case 34:\n                            window.alert('左键长按')\n                            break;\n                        case 35:\n                            window.alert('右键单击')\n                            break;\n                        case 36:\n                            window.alert('右键双击')\n                            break;\n                        case 37:\n                            window.alert('右键长按')\n                            break;\n                case 100:\n                    let c = document.getElementById('myCanvas');\n                    c.height = c.height;\n                    break;\n            }\n        },\n        penInit(){\n            this.closeUSB()\n        },\n        //打开USB设备\n        openUSB(){\n            let VID = this.vid;\n            let PID = this.pid;\n            this.port.postMessage({cmd:'openUSB',pid: PID,vid: VID});\n            this.changeMode()\n        },\n        //关闭USB设备\n        closeUSB(){\n            this.port.postMessage({cmd:'closeUSB'});\n            \n        },\n        //获取dongle状态\n        getDongleStatus() {\n            console.log(123);\n            this.port.postMessage({cmd:'dongleStatus'});\n        },\n        //扫描蓝牙\n        scanBLE(){\n            this.port.postMessage({cmd:'scanBLE'});\n        },\n        //连接蓝牙设备\n        connectBLE(num) {\n            this.port.postMessage({cmd:'connectBLE',num: num});\n        },\n        //断开蓝牙\n        disconnectBLE() {\n            this.port.postMessage({cmd:'closeBLE'});\n        },\n        // 切换笔模式\n        changeMode() {\n            this.port.postMessage({cmd:'changeMode'});\n        },\n        // clear canvas\n        clearCanvas(){\n            let c = document.getElementById('myCanvas');\n            c.height = c.height;\n            this.port.postMessage({cmd:'clearCanvas'});\n        },\n\n        lineTo(x, y, s, p){\n            const that = this\n            let tx = this.ratioX * x;\n            let ty = this.ratioY * y;\n            let tw = 1.1;\n            let con = 'x='+x+',y='+y+',s='+s+',p='+p;\n            $('#content').text(con);\n            if (s == 16 || s == 0) {\n                this.isStart = 0;\n                that.painting = false\n                return;\n            }\n            if(this.isStart > 0){\n                \n                this.x2 = Math.floor(this.ratioX * x);\n                this.y2 = Math.floor(this.ratioY * y);\n                let d = Math.sqrt(Math.pow(this.x1 - this.x2, 2) + Math.pow(this.y1 - this.y2, 2));\n                if(d > this.res){\n                    tx = Math.round((this.x1 + this.x2) / 2 * 100) / 100;\n                    ty = Math.round((this.y1 + this.y2) / 2 * 100) / 100;\n                    if (this.isStart == 1) {\n                       \n                    } else {\n                        this.context.quadraticCurveTo(this.x1, this.y1, tx, ty);\n                        this.context.lineWidth = tw;\n                        this.context.stroke();\n                        this.context.beginPath();\n                        this.context.moveTo(tx,ty);\n                        const lastLine = that.lines[that.lines.length - 1]\n                            lastLine.points = lastLine.points.concat([this.x1, this.y1])\n                            console.log(lastLine)\n                            that.$store.commit('updateNewLine', lastLine)\n                            // 请求服务器\n                            that.$store.dispatch('sendUpdateNewLine', lastLine)\n                        \n                        // console.log(tx + \" \" + ty);\n                        \n                            \n                        \n                            \n                    }\n                    this.x1 = this.x2;\n                    this.y1 = this.y2;\n                }\n                this.isStart++;\n                that.painting = true\n            }else{\n                /* 初始化画点*/\n                this.isStart = 1;\n                this.context.beginPath();\n                this.context.lineCap = \"round\";\n                this.context.strokeStyle = \"#000\";//新增\n                this.x1 = tx;\n                this.y1 = ty;\n                this.context.moveTo(tx, ty);//起点\n                this.isStart++;\n                that.painting = true\n                // 创建一个新线条\n                const newLine = {\n                    stroke: this.stroke,\n                    strokeWidth: this.strokeWidth,\n                    points: [this.x1, this.y1]\n                }\n                // 本地画线, 存到vuex中\n                that.$store.commit('drawNewLine', newLine)\n                // 请求服务器\n                that.$store.dispatch('sendDrawNewLine', newLine)\n                this.context.lineTo(tx, ty);\n            }\n        }\n\n    \n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.el-card{\n      touch-action: none;\n      width: 789.43px;\n      height: 450;\n      overflow: hidden;\n\n}\n</style>\n"]}]}
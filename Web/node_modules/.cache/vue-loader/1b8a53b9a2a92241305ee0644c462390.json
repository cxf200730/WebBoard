{"remainingRequest":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/views/Login/index.vue?vue&type=style&index=0&id=991b3d8e&scoped=true&lang=css&","dependencies":[{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/src/views/Login/index.vue","mtime":1629857297096},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5sb2dpbi1jYXJkIHsKICB3aWR0aDogNTAlOwogIG1hcmdpbjogMCBhdXRvOwogIG1hcmdpbi10b3A6IDIwMHB4Owp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\n  <div>\n    <el-card\n      class=\"login-card\"\n      :body-style=\"{ display: 'flex', justifyContent: 'center', alignItems: 'center', padding: '60px'}\"\n    >\n      <el-form ref=\"loginForm\"  :model=\"formData\" :rules=\"rules\">\n        <el-form-item prop=\"phone\" label = \"手机号/学号\">\n          <el-input v-model=\"formData.phone\" placeholder=\"请输入您的昵称\" />\n        </el-form-item>\n        \n          <el-form-item prop=\"password\" label = \"密码\">\n            <el-input v-model=\"formData.password\" placeholder=\"测试\" />\n          </el-form-item>\n       \n          <el-form-item>\n            <el-button type=\"primary\" @click=\"login('teacher')\">老师登录</el-button>\n            <el-button @click=\"login('student')\">学生登陆</el-button>\n          </el-form-item>\n      \n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { MessageBox } from 'element-ui'\nexport default {\n  data() {\n    return {\n      // 表单信息\n      formData: {\n        phone: '20210101',\n        password:'123456'\n      },\n\n      // 校验规则\n      rules: {\n        phone: [{ required: true, message: '请输入您的手机号' }],\n        password: [{ required: true, message: '请输入您的密码' }]\n      }\n    }\n  },\n\n  methods: {\n    login(str) {\n      const that = this\n      let url = \"\"\n      let type = \"\"\n      if(str === \"teacher\") {\n        url = 'http://192.168.51.109:3000/teacher/login'\n        type = \"teacher\"\n        localStorage.setItem('type', type)\n      }else{\n        url = 'http://192.168.51.109:3000/student/login'\n        type = \"student\"\n        localStorage.setItem('type', type)\n      }\n      this.$refs.loginForm.validate(async flag => {\n        if (!flag) return\n\n        that.axios.post(url,null,{\n            params:{\n                // params就是query参\n                phone:that.formData.phone,\n                password:that.formData.password\n            }\n        }).then( (res) => {\n            console.log(res.data.message)\n            if(res.data.message.length != 0){\n              alert(\"登陆成功\")\n              if(type === \"teacher\"){\n                localStorage.setItem('teacherphone', that.formData.phone)\n                that.$router.push('teacher')\n              }else{\n                localStorage.setItem('teacherphone', that.formData.phone)\n                localStorage.setItem('studentcode', that.formData.phone)\n                localStorage.setItem('classcode', \"1101\")\n                that.$router.push('write')\n              }\n            }else{\n              alert(\"密码错误！\")\n            }\n          })\n      })\n    },\n  }\n}\n</script>\n\n<style scoped>\n.login-card {\n  width: 50%;\n  margin: 0 auto;\n  margin-top: 200px;\n}\n</style>\n"]}]}
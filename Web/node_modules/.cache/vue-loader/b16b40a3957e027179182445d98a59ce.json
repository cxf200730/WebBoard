{"remainingRequest":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/src/views/Game/components/app-stage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/src/views/Game/components/app-stage.vue","mtime":1629251362869},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chengxiaofeng/Desktop/项目/手写板项目/8-13Web端/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCcKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQoKXsKICAgIGNvbnNvbGUubG9nKCLnvZfljZrniYjnmoTlrr3lkozpq5giICsgMjkwMDAgKyAiICIgKyAgMjEwMDApOwogICAgY29uc29sZS5sb2coIuWxj+W5leeahOWuveWSjOmrmO+8miIgKyB3aW5kb3cuc2NyZWVuLndpZHRoICsgIiAiICsgIHdpbmRvdy5zY3JlZW4uaGVpZ2h0ICkKICAgIC8vIGNvbnNvbGUubG9nKCLnvZHpobXnmoTlrr3lkozpq5jvvJoiICsgd2luZG93LnNjcmVlbi5hdmFpbFdpZHRoKyAiICIgK3dpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQpCiAgICAvLyBjb25zb2xlLmxvZygi572R6aG15YaF5a6555qE5a695ZKM6auY77yaIiArIHdpbmRvdy5pbm5lcldpZHRoICsgIiAiICsgIHdpbmRvdy5pbm5lckhlaWdodCkKICAgIGNvbnNvbGUubG9nKCLlrr3pq5jmr5QiICsgMjkwMDAgLyB3aW5kb3cuc2NyZWVuLndpZHRoICsgIiAiICsgIDIxMDAwIC8gd2luZG93LnNjcmVlbi5oZWlnaHQpOwogIAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOeUu+W4g+mFjee9rgogICAgICBzdGFnZUNvbmZpZzogewogICAgICAgIHdpZHRoOiA4NzAsCiAgICAgICAgaGVpZ2h0OiA2MzAKICAgICAgfSwKICAgICAgLy8g57uY55S754q25oCBCiAgICAgIHBhaW50aW5nOiBmYWxzZSwKICAgICAgc3Ryb2tlOiAnI2RmNGIyNicsCiAgICAgIHN0cm9rZVdpZHRoOiAyCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoWydsaW5lcyddKSwKICAgIC4uLm1hcEdldHRlcnMoWydpc0dhbWVTdGFydGVkJywgJ2lzR2FtZUhvbGRlciddKQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICAvLyDlsIbnlLvluIPlrr3luqborr7nva7kuI7lrrnlmajlkIzlrr0KICAgIHRoaXMuc3RhZ2VDb25maWcud2lkdGggPSB0aGlzLiRyZWZzLndyYXBwZXIuJGVsLm9mZnNldFdpZHRoCiAgfSwKCiAgbWV0aG9kczogewogICAgLy8g6byg5qCH5oyJ5LiLCiAgICBtb3VzZWRvd25IYW5kbGVyKGUpIHsKICAgICAgaWYgKCF0aGlzLmlzR2FtZUhvbGRlciB8fCAhdGhpcy5pc0dhbWVIb2xkZXIpIHJldHVybgoKICAgICAgdGhpcy5wYWludGluZyA9IHRydWUKICAgICAgLy8g5Yib5bu65LiA5Liq5paw57q/5p2hCiAgICAgIGNvbnN0IG5ld0xpbmUgPSB7CiAgICAgICAgc3Ryb2tlOiB0aGlzLnN0cm9rZSwKICAgICAgICBzdHJva2VXaWR0aDogdGhpcy5zdHJva2VXaWR0aCwKICAgICAgICBwb2ludHM6IFtlLmV2dC5sYXllclgsIGUuZXZ0LmxheWVyWV0KICAgICAgfQogICAgICAvLyDmnKzlnLDnlLvnur8sIOWtmOWIsHZ1ZXjkuK0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkcmF3TmV3TGluZScsIG5ld0xpbmUpCiAgICAgIC8vIOivt+axguacjeWKoeWZqAogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VuZERyYXdOZXdMaW5lJywgbmV3TGluZSkKCiAgICAgIC8vIGUgPSB3aW5kb3cuZXZlbnQgfHwgZTsKICAgICAgLy8gY29uc29sZS5sb2coZS5jbGllbnRYICsgIiAiICsgZS5jbGllbnRZKTsKICAgIH0sCgogICAgLy8g6byg5qCH5ouW5YqoCiAgICBtb3VzZW1vdmVIYW5kbGVyKGUpIHsKICAgICAgLy8gZSA9IHdpbmRvdy5ldmVudCB8fCBlOwogICAgICAvLyBjb25zb2xlLmxvZyhlLnNjcmVlblggKyAiICIgKyBlLnNjcmVlblkpOwogICAgICBpZiAoIXRoaXMucGFpbnRpbmcpIHJldHVybgogICAgICBjb25zdCBsYXN0TGluZSA9IHRoaXMubGluZXNbdGhpcy5saW5lcy5sZW5ndGggLSAxXQogICAgICBsYXN0TGluZS5wb2ludHMgPSBsYXN0TGluZS5wb2ludHMuY29uY2F0KFtlLmV2dC5sYXllclgsIGUuZXZ0LmxheWVyWV0pCiAgICAgIGNvbnNvbGUubG9nKGxhc3RMaW5lLnBvaW50cykKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVOZXdMaW5lJywgbGFzdExpbmUpCiAgICAgIC8vIOivt+axguacjeWKoeWZqAogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VuZFVwZGF0ZU5ld0xpbmUnLCBsYXN0TGluZSkKICAgICAgCiAgICB9LAoKICAgIC8vIOm8oOagh+mHiuaUvgogICAgbW91c2V1cEhhbmRsZXIoKSB7CiAgICAgIHRoaXMucGFpbnRpbmcgPSBmYWxzZQogICAgfQogIH0KfQo="},{"version":3,"sources":["app-stage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"app-stage.vue","sourceRoot":"src/views/Game/components","sourcesContent":["<template>\n  <el-card ref=\"wrapper\" :body-style=\"{ padding: 0}\">\n    <v-stage\n      :config=\"stageConfig\"\n      @mousedown=\"mousedownHandler\"\n      @mouseup=\"mouseupHandler\"\n      @mousemove=\"mousemoveHandler\"\n    >\n      <v-layer>\n        <v-line\n          v-for=\"(line, index) in lines\"\n          :key=\"index\"\n          :config=\"line\"\n        />\n      </v-layer>\n    </v-stage>\n  </el-card>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex'\nexport default {\n  created(){\n    console.log(\"罗博版的宽和高\" + 29000 + \" \" +  21000);\n    console.log(\"屏幕的宽和高：\" + window.screen.width + \" \" +  window.screen.height )\n    // console.log(\"网页的宽和高：\" + window.screen.availWidth+ \" \" +window.screen.availHeight)\n    // console.log(\"网页内容的宽和高：\" + window.innerWidth + \" \" +  window.innerHeight)\n    console.log(\"宽高比\" + 29000 / window.screen.width + \" \" +  21000 / window.screen.height);\n  \n  },\n  data() {\n    return {\n      // 画布配置\n      stageConfig: {\n        width: 870,\n        height: 630\n      },\n      // 绘画状态\n      painting: false,\n      stroke: '#df4b26',\n      strokeWidth: 2\n    }\n  },\n  computed: {\n    ...mapState(['lines']),\n    ...mapGetters(['isGameStarted', 'isGameHolder'])\n  },\n\n  mounted() {\n    // 将画布宽度设置与容器同宽\n    this.stageConfig.width = this.$refs.wrapper.$el.offsetWidth\n  },\n\n  methods: {\n    // 鼠标按下\n    mousedownHandler(e) {\n      if (!this.isGameHolder || !this.isGameHolder) return\n\n      this.painting = true\n      // 创建一个新线条\n      const newLine = {\n        stroke: this.stroke,\n        strokeWidth: this.strokeWidth,\n        points: [e.evt.layerX, e.evt.layerY]\n      }\n      // 本地画线, 存到vuex中\n      this.$store.commit('drawNewLine', newLine)\n      // 请求服务器\n      this.$store.dispatch('sendDrawNewLine', newLine)\n\n      // e = window.event || e;\n      // console.log(e.clientX + \" \" + e.clientY);\n    },\n\n    // 鼠标拖动\n    mousemoveHandler(e) {\n      // e = window.event || e;\n      // console.log(e.screenX + \" \" + e.screenY);\n      if (!this.painting) return\n      const lastLine = this.lines[this.lines.length - 1]\n      lastLine.points = lastLine.points.concat([e.evt.layerX, e.evt.layerY])\n      console.log(lastLine.points)\n      this.$store.commit('updateNewLine', lastLine)\n      // 请求服务器\n      this.$store.dispatch('sendUpdateNewLine', lastLine)\n      \n    },\n\n    // 鼠标释放\n    mouseupHandler() {\n      this.painting = false\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.el-card__body{\n  width: 870,\n  height = 630\n}\n</style>"]}]}